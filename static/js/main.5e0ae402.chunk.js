(this["webpackJsonpinternships-2021"]=this["webpackJsonpinternships-2021"]||[]).push([[0],{126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var a,r=n(1),s=n.n(r),i=n(27),c=n.n(i),o=(n(70),n(17)),l=n(3),d=n(2),u=n.n(d),b=n(4),j=n(65),m=String("https://foammhipcaktheiqbvqe.supabase.co"),x=String("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyNjI3MTA5MiwiZXhwIjoxOTQxODQ3MDkyfQ.eL3JU79VGLK32aPQDh9JZ-hsHCOtTN9EESh07e96FeM"),h=Object(j.a)(m,x),f=h,v="".concat("/internships-2021","/image-not-found.png"),p="".concat("/internships-2021","/defaultAvatar.png"),O=function(e){var t;return(null===e||void 0===e||null===(t=e.imageLinks)||void 0===t?void 0:t.length)<=e.featuredImageId?v:e.imageLinks[e.featuredImageId]},g=function(e,t){o.c.warn(e,{toastId:t,autoClose:6e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0})},w=function(e,t){o.c.info(e,{toastId:t,autoClose:6e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0})},k=function(e,t){o.c.success(e,{toastId:t,autoClose:6e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0})},N=function(e,t){o.c.error(e,{toastId:t,autoClose:6e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0})},y=n(0),C=s.a.createContext(null),S=s.a.createContext(null),A=null!==(a=f.auth.user())&&void 0!==a?a:null,I=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,f.from("profiles").select("\n      *\n    ").eq("id",null!==t&&void 0!==t?t:"");case 4:return n=e.sent,a=n.data,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){return null===e||void 0===e?void 0:e.isAdmin},B=function(){return f.auth.user()},q=function(){return Object(r.useContext)(C)},F=function(){return Object(r.useContext)(S)},R=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=2;break}return e.abrupt("return",p);case 2:return e.next=4,f.storage.from("images/avatars").createSignedUrl("".concat(null===(t=A)||void 0===t?void 0:t.id),43200);case 4:return n=e.sent,a=n.signedURL,e.abrupt("return",null!==a&&void 0!==a?a:p);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){var t,n,a=e.children,s=Object(r.useState)(null),i=Object(l.a)(s,2),c=i[0],o=i[1];(A=f.auth.user(),c)||I(null!==(t=null===(n=A)||void 0===n?void 0:n.id)&&void 0!==t?t:"").then((function(e){var t,n,a,r,s,i,c=null===e||void 0===e?void 0:e[0];o({createdAt:null!==(t=null===c||void 0===c?void 0:c.createdAt)&&void 0!==t?t:"",email:null!==(n=null===c||void 0===c?void 0:c.email)&&void 0!==n?n:"",firstName:null!==(a=null===c||void 0===c?void 0:c.firstName)&&void 0!==a?a:"",id:null!==(r=null===c||void 0===c?void 0:c.id)&&void 0!==r?r:"",isAdmin:null!==(s=null===c||void 0===c?void 0:c.isAdmin)&&void 0!==s&&s,lastName:null!==(i=null===c||void 0===c?void 0:c.lastName)&&void 0!==i?i:""})}));return Object(y.jsx)(C.Provider,{value:c,children:Object(y.jsx)(S.Provider,{value:function(e){o(e)},children:a})})},E=n(6),T=n(5),P=function(e){var t=e.urlBlank,n=e.urlFull,a=e.fillingPercent,r={clipPath:"polygon(0 0, ".concat(a,"% 0, ").concat(a,"% 100%, 0 100%)")};return Object(y.jsx)("div",{className:"w-full h-full",children:100===a?Object(y.jsx)("img",{src:n,alt:"Filled ranking icon",className:"w-full h-full"}):Object(y.jsxs)("div",{className:"grid grid-cols-1 grid-rows-1 w-full h-full",children:[0!==a&&Object(y.jsx)("img",{src:n,style:r,alt:"Blank ranking icon",className:"col-start-1 col-end-2 row-start-1 row-end-2 w-full h-full"}),Object(y.jsx)("img",{src:t,alt:"Blank ranking icon",className:"col-start-1 col-end-2 row-start-1 row-end-2 w-full h-full"})]})})},M="".concat("/internships-2021","/star_border_black.svg"),U="".concat("/internships-2021","/star_black.svg"),z=function(e){for(var t=e.bare,n=e.votesAmount,a=e.avgRating,r=[],s=a/10*100,i=0;i<5;i++)r.push(Object(y.jsx)(P,{urlBlank:M,urlFull:U,fillingPercent:Math.floor(Math.max(0,Math.min(100,5*s)))},i)),s-=20;return Object(y.jsxs)("div",{className:"flex flex-wrap justify-center items-center flex-col",children:[Object(y.jsx)("div",{className:"flex justify-between w-full h-full",children:r}),!t&&Object(y.jsxs)("span",{className:"text-gray-600 text-xs mt-1",children:["Ilosc g\u0142os\xf3w: ",n]}),!t&&Object(y.jsxs)("span",{className:"text-gray-600 text-xs mt-1",children:["Srednia ocena: ",Math.round(100*a)/100]})]})},V=(n(42),n(43),function(e){var t=e.bookId,n=e.profileId,a=e.date,r=e.returnDate,s=e.quantity,i=function(){var e=Object(b.a)(u.a.mark((function e(){var i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.auth.user()){e.next=20;break}return e.next=3,f.from("borrowedBooks").select("id").match({bookId:t,profileId:n});case 3:if(i=e.sent,null===(c=i.data)||void 0===c?void 0:c.length){e.next=17;break}if(!(s>=0)){e.next=14;break}return e.next=9,f.from("borrowedBooks").insert({bookId:t,profileId:n,date:a,returnDate:r});case 9:return e.next=11,f.from("books").update({quantity:s}).match({id:t});case 11:k("Book borrowed successfully!","borrow-book-success"),e.next=15;break;case 14:N("This book is not in stock right now","borrow-book-error");case 15:e.next=18;break;case 17:N("You have already borrowed this book","borrow-book-warning");case 18:e.next=21;break;case 20:g("You must be logged in to borrow a book!","borrow-book-warning");case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)("div",{children:Object(y.jsx)("button",{type:"button",className:"btn-page",onClick:i,children:"Borrow a book"})})}),J=function(e){var t,n,a,r,s,i,c=e.book,o=q();return Object(y.jsxs)("div",{className:"flex flex-col sm:flex-row place-content-center max-w-full md:w-auto bg-gray-50 shadow p-3 m-3 mx-6",children:[Object(y.jsx)("div",{className:"m-3 flex justify-center",children:Object(y.jsx)(E.b,{to:"/book/".concat(c.id),children:Object(y.jsx)("img",{src:O(c),alt:"".concat(null!==(t=c.title)&&void 0!==t?t:"N/D"," cover."),className:"transform hover:scale-110 cursor-pointer w-32 transition duration-400 ease-in-out hover:-translate-y-1"})})}),Object(y.jsxs)("div",{className:"ml-2 mb-4 md:mb-0 w-full",children:[Object(y.jsx)("span",{className:"break-words cursor-pointer transition duration-400 ease-in-out hover:text-gray-500",children:Object(y.jsx)(E.b,{to:"/book/".concat(c.id),children:null!==(n=c.title)&&void 0!==n?n:"N/D"})}),Object(y.jsxs)("div",{className:"text-gray-400 flex flex-col",children:[Object(y.jsx)("span",{children:null!==(a=null===(r=c.authors)||void 0===r?void 0:r.join(" "))&&void 0!==a?a:"N/D"}),Object(y.jsx)("span",{children:null!==(s=c.categories)&&void 0!==s?s:"N/D"}),Object(y.jsx)("div",{className:"overflow-hidden max-h-20 book-desc",children:null!==(i=c.description)&&void 0!==i?i:"N/D"}),Object(y.jsx)("div",{className:"flex h-4 mt-2",children:Object(y.jsx)(z,{votesAmount:c.votesAmount,avgRating:c.avgRating,bare:!0})})]})]}),Object(y.jsx)("div",{children:Object(y.jsx)(V,{bookId:c.id,profileId:null===o||void 0===o?void 0:o.id,date:new Date,returnDate:new Date((new Date).setMonth((new Date).getMonth()+1)),quantity:c.quantity?c.quantity-1:-1})})]})},H="title",Q=function(){return H},Y=function(e){H=e},Z=function(){var e=Object(r.useState)(0),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)("*"),i=Object(l.a)(s,2),c=i[0],o=i[1],d=Object(r.useState)(!0),u=Object(l.a)(d,2),b=u[0],j=u[1],m=Object(T.g)();return Object(y.jsxs)("div",{className:"flex justify-between bg-white",children:[Object(y.jsx)("div",{className:"bg-white inline z-40 ".concat(b?"hidden":"fixed lg:static"),children:Object(y.jsx)("button",{type:"button",className:"btn-sidebar lg:hidden",onClick:function(){return j(!b)},children:"\u2b9c"})}),Object(y.jsx)("div",{className:"lg:block z-30 inset-0 flex-none min-h-screen h-full lg:h-auto bg-white ml-6 lg:mt-0 lg:ml-0 pb-10 lg:pt-0\n        w-72 shadow-sm dark:bg-gray-800 overflow-y-auto lg:overflow-y-visible ".concat(b?"hidden":"fixed lg:static"),children:Object(y.jsxs)("div",{className:"items-center justify-between scrolling-touch fixed top-14 max-h-screen overflow-y-auto pb-8",children:[Object(y.jsx)("div",{className:"border-b border-gray-400 mx-4 my-5 pl-2 text-l font-bold",children:"Filters"}),Object(y.jsxs)("nav",{className:"mx-4 my-3",children:[Object(y.jsxs)("div",{className:"flex-col border-b border-gray-200 mx-1 pb-5 mt-5",children:[Object(y.jsx)("label",{htmlFor:"searchbar",className:"mr-2",children:"Search"}),Object(y.jsx)("input",{type:"text",placeholder:"Enter book name",id:"searchbar",className:"p-1 placeholder-gray-400 text-gray-600 border outline-none transition duration-300 ease-in-out focus:ring-2 ring-gray-200",onChange:function(e){var t,n;String(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value).length>0?o(String(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)):o("*")}}),Object(y.jsxs)("div",{className:"flex justify-evenly mt-2",children:[Object(y.jsx)("input",{type:"radio",name:"type",id:"title",value:"title",onChange:function(){return Y("title")},defaultChecked:!0}),"Filter by title",Object(y.jsx)("input",{type:"radio",name:"type",id:"author",value:"author",onChange:function(){return Y("authors")}}),"Filter by author"]})]}),Object(y.jsx)("div",{className:"border-b border-gray-200 mx-1 pl-4 pb-5 mt-5",children:Object(y.jsxs)("ul",{className:"list-disc",children:[Object(y.jsx)("li",{children:"Fiction"}),Object(y.jsx)("li",{children:"Literature of fact, journalism"}),Object(y.jsx)("li",{children:"Popular science literature"}),Object(y.jsx)("li",{children:"Children's literature"}),Object(y.jsx)("li",{children:"Comics"}),Object(y.jsx)("li",{children:"Poetry, drama satire"}),Object(y.jsx)("li",{children:"Other"})]})}),Object(y.jsxs)("div",{className:"border-b border-gray-200 mx-1 pl-4 pb-5 mt-5",children:[Object(y.jsx)("input",{type:"range",min:"0",max:"10",defaultValue:"0",onChange:function(e){var t;a(Number(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}}),Object(y.jsx)("span",{className:"ml-2",id:"range",children:n>0?n:"All"})]}),Object(y.jsx)("div",{className:"flex border-b border-gray-200 mx-1 pl-4 pb-5 mt-5 place-content-center",children:Object(y.jsx)("button",{className:"btn-page w-2/3",type:"button",onClick:function(){return m.replace("/books-list/".concat(c,"/").concat(n))},children:"Filter"})})]})]})}),Object(y.jsx)("div",{className:"inline z-40 ".concat(b?"fixed":"hidden"),children:Object(y.jsx)("button",{type:"button",className:"btn-sidebar lg:hidden",onClick:function(){j(!b)},children:"\u2b9e"})})]})},_=function(e,t){var n=!1;return"*"===t||(null===e||void 0===e||e.forEach((function(e){e.toLowerCase().includes(t.toLowerCase())&&(n=!0)})),n)},K=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(T.i)();return Object(r.useEffect)((function(){var e;(null===s||void 0===s||null===(e=s.q)||void 0===e?void 0:e.length)<1&&(s.q="*"),function(){var e=Object(b.a)(u.a.mark((function e(){var t,n,r,i,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="%".concat(s.q?s.q:"*","%"),"title"!==Q()){e.next=9;break}return e.next=4,f.from("books").select("*").ilike("title",t).gte("avgRating",s.rating);case 4:n=e.sent,r=n.data,a(r),e.next=16;break;case 9:if("authors"!==Q()){e.next=16;break}return e.next=12,f.from("books").select("*").gte("avgRating",s.rating);case 12:c=e.sent,o=c.data,l=null!==(i=null===o||void 0===o?void 0:o.filter((function(e){return _(null===e||void 0===e?void 0:e.authors,s.q)})))&&void 0!==i?i:[],a(l);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[s]),Object(y.jsxs)("div",{className:"content-container",children:[Object(y.jsx)(Z,{}),Object(y.jsxs)("div",{className:"mt-3 w-full shadow-inner",children:[n&&(null===n||void 0===n?void 0:n.map((function(e){return Object(y.jsx)(J,{book:e},e.id)}))),n&&(null===n||void 0===n?void 0:n.length)<1&&Object(y.jsx)("div",{className:"flex justify-center italic",children:"No results"})]})]})},W=n(22),X=function(e){var t=e.title,n=e.okButtonLabel,a=e.onVisibilityChange,r=e.onOkButtonClick,s=e.children;return Object(y.jsx)("div",{className:"fixed left-0 top-0 pin z-50 overflow-auto bg-gray-400 bg-opacity-50 flex h-screen w-screen",children:Object(y.jsxs)("div",{className:"relative p-8 bg-white w-full max-w-md m-auto flex-col flex rounded-md shadow-xl",children:[Object(y.jsxs)("div",{className:"flex justify-between",children:[Object(y.jsx)("h1",{className:"font-bold",children:t}),Object(y.jsx)("button",{type:"button",onClick:function(){return a()},className:"btn-exit",children:"X"})]}),Object(y.jsx)("div",{children:s}),Object(y.jsx)("button",{type:"submit",className:"btn-page mt-3",onClick:function(){return r()},children:n})]})})},G=function(){var e=F(),t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(W.a)({initialValues:{emailAdress:"",password:""},onSubmit:function(){var t=Object(b.a)(u.a.mark((function t(n){var r,i,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.auth.signIn({email:n.emailAdress,password:n.password});case 2:if(r=t.sent,i=r.user,!(c=r.error)){t.next=8;break}return N("Failed to log-in. Error: ".concat(c.message),"login-error"),t.abrupt("return");case 8:i&&e&&(I(null===i||void 0===i?void 0:i.id).then(function(){var t=Object(b.a)(u.a.mark((function t(n){var a,r,s,i,c,o,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=null===n||void 0===n?void 0:n[0],e({createdAt:null!==(a=null===l||void 0===l?void 0:l.createdAt)&&void 0!==a?a:"",email:null!==(r=null===l||void 0===l?void 0:l.email)&&void 0!==r?r:"",firstName:null!==(s=null===l||void 0===l?void 0:l.firstName)&&void 0!==s?s:"",id:null!==(i=null===l||void 0===l?void 0:l.id)&&void 0!==i?i:"",isAdmin:null!==(c=null===l||void 0===l?void 0:l.isAdmin)&&void 0!==c&&c,lastName:null!==(o=null===l||void 0===l?void 0:l.lastName)&&void 0!==o?o:""});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),s(!a),k("Login successful","login-success"));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),c=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("profiles").select("email").eq("email",i.values.emailAdress);case 2:t=e.sent,(null===(n=t.data)||void 0===n?void 0:n.length)||g("There's no user associated with this email","login-no-email");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:"btn-nav text-left relative",children:Object(y.jsx)("button",{type:"button",onClick:function(){return s(!a)},children:"Sign In"})}),a&&Object(y.jsx)(X,{title:"Login",okButtonLabel:"Sign In",onOkButtonClick:function(){return i.submitForm()},onVisibilityChange:function(){return s(!a)},children:Object(y.jsx)("form",{onSubmit:i.handleSubmit,children:Object(y.jsxs)("div",{className:"flex content-between",children:[Object(y.jsxs)("div",{className:"mr-1 flex-auto",children:[Object(y.jsx)("label",{htmlFor:"email-adress",className:"text-xs block",children:"Email adress:"}),Object(y.jsx)("input",{id:"emailAdress",name:"emailAdress",type:"email",placeholder:"Email-adress",onChange:i.handleChange,onBlur:c,value:i.values.emailAdress,className:"input-pri"})]}),Object(y.jsx)("div",{className:"flex flex-auto flex-col items-end",children:Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{htmlFor:"password",className:"text-xs block",children:"Password:"}),Object(y.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Password",onChange:i.handleChange,value:i.values.password,className:"input-pri"})]})})]})})})]})},$=function(e){var t=e.title,n=e.items,a=e.logOut,s=Object(r.useState)(!1),i=Object(l.a)(s,2),c=i[0],o=i[1];return Object(y.jsxs)("div",{className:"relative btn-nav-end",children:[Object(y.jsx)("button",{type:"button",className:"navbar-nav text-left relative",onClick:function(){return o(!c)},children:t}),c&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"hidden md:flex md:fixed left-0 top-0 pin z-40 overflow-auto bg-white bg-opacity-0 h-screen w-screen",onClick:function(){return o(!c)},children:"\xa0"}),Object(y.jsxs)("div",{className:"dropdown block md:absolute top-0 left-0 w-auto overflow-hidden md:-translate-y-0 z-50 bg-gray-700 md:bg-gray-600 text-white border-none md:border border-gray-400 md:border-gray-800 rounded-sm",children:[n.map((function(e){return Object(y.jsx)("div",{className:"menu-item border-b border-gray-400 md:border-gray-700",children:Object(y.jsx)("button",{type:"button",children:Object(y.jsx)(E.b,{to:"".concat(e.link),className:"cursor-pointer transition duration-400 ease-in-out hover:text-indigo-500",children:e.label})})},e.label)})),Object(y.jsx)("div",{className:"menu-item",children:Object(y.jsx)("button",{type:"button",onClick:a,className:"cursor-pointer transition duration-400 ease-in-out hover:text-indigo-500",children:"Logout"})})]})]})]})},ee=function(e){var t=e.onSuccess,n=e.onVisibilityChange,a=Object(W.a)({initialValues:{emailAdress:"",password:"",firstName:"",lastName:""},onSubmit:function(){var e=Object(b.a)(u.a.mark((function e(a){var r,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.auth.signUp({email:a.emailAdress,password:a.password});case 2:if(r=e.sent,s=r.user,!(i=r.error)){e.next=8;break}return N(i.message,"register-supabase-error"),e.abrupt("return");case 8:if(!s){e.next=12;break}return e.next=11,h.from("profiles").insert({id:s.id,firstName:a.firstName,lastName:a.lastName,email:a.emailAdress}).then((function(e){201===e.status?(k("Registered successfully!","register-success"),t()):g(e.statusText,"register-warning")}));case 11:n();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("profiles").select("email").eq("email",a.values.emailAdress);case 2:t=e.sent,(null===(n=t.data)||void 0===n?void 0:n.length)||g("A user with this email address has already been registered","register-email-used");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(X,{title:"Register",okButtonLabel:"Sign Up",onOkButtonClick:function(){return a.submitForm()},onVisibilityChange:function(){return n()},children:Object(y.jsxs)("form",{onSubmit:a.handleSubmit,children:[Object(y.jsxs)("div",{className:"flex justify-between",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{htmlFor:"firstName",className:"text-xs block",children:"First Name:"}),Object(y.jsx)("input",{id:"firstName",name:"firstName",type:"text",placeholder:"First Name",onChange:a.handleChange,value:a.values.firstName,className:"input-pri"})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{htmlFor:"lastName",className:"text-xs block",children:"Last Name:"}),Object(y.jsx)("input",{id:"lastName",name:"lastName",type:"text",placeholder:"Last Name",onChange:a.handleChange,value:a.values.lastName,className:"input-pri"})]})]}),Object(y.jsxs)("div",{className:"flex justify-between",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{htmlFor:"email-adress",className:"text-xs block",children:"Email adress:"}),Object(y.jsx)("input",{id:"emailAdress",name:"emailAdress",type:"email",placeholder:"Email-adress",onChange:a.handleChange,onBlur:r,value:a.values.emailAdress,className:"input-pri"})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{htmlFor:"password",className:"text-xs block",children:"Password:"}),Object(y.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Password",onChange:a.handleChange,value:a.values.password,className:"input-pri"})]})]})]})})},te=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:"btn-nav-end text-left relative",children:Object(y.jsx)("button",{type:"button",onClick:function(){return a(!n)},children:"Sign Up"})}),n&&Object(y.jsx)(ee,{onSuccess:function(){},onVisibilityChange:function(){return a(!n)}})]})},ne=function(){var e=q(),t=F(),n=Object(r.useState)(!1),a=Object(l.a)(n,2),s=a[0],i=a[1],c=Object(T.g)(),o=Object(r.useState)([{link:"/user",label:"User Profile"},{link:"/user/books",label:"User Books"}]),d=Object(l.a)(o,2),u=d[0],b=d[1];Object(r.useEffect)((function(){D(e)?b([{link:"/user",label:"User Profile"},{link:"/user/books",label:"User Books"},{link:"/admin/owned",label:"Owned"},{link:"/admin/store",label:"Store"}]):b([{link:"/user",label:"User Profile"},{link:"/user/books",label:"User Books"}])}),[e]);return Object(y.jsx)("nav",{className:"bg-gray-700 shadow dark:bg-gray-800",children:Object(y.jsxs)("div",{className:"container px-6 py-3 mx-auto md:flex md:justify-between md:items-center",children:[Object(y.jsxs)("div",{className:"flex items-center justify-between",children:[Object(y.jsx)(E.b,{to:"/",children:Object(y.jsx)("div",{children:Object(y.jsx)("span",{className:"text-xl font-bold text-white dark:text-white md:text-2xl",children:"Books"})})}),Object(y.jsx)("button",{type:"button",className:"border-gray-400 text-gray-200 rounded-md border max-h-full px-1 transition duration-500 ease-in-out hover:bg-gray-200 hover:text-gray-700 md:hidden",onClick:function(){return i(!s)},children:"\u2630"})]}),Object(y.jsx)("div",{className:s?"block items-center md:flex":"hidden md:block items-center",children:Object(y.jsxs)("div",{className:"flex flex-col md:flex-row my-2 md:my-0 md:mx-6",children:[Object(y.jsx)("button",{type:"button",className:"btn-nav text-left relative",children:Object(y.jsx)(E.b,{to:"/",children:"Home"})}),Object(y.jsx)("button",{type:"button",className:"btn-nav text-left relative",children:Object(y.jsx)(E.b,{to:"/books-list",children:"Book List"})}),B()?Object(y.jsx)($,{title:null===e||void 0===e?void 0:e.email,items:u,logOut:function(){t&&t({createdAt:"",email:"",firstName:"",id:"",isAdmin:!1,lastName:""}),f.auth.signOut(),c.push("/"),k("Logged out successfully","logout-success")}}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(G,{}),Object(y.jsx)(te,{})]})]})})]})})},ae=function(e){for(var t=e.items,n=[],a=0;a<t.length;a++)n.push(Object(y.jsxs)("div",{className:"flex flex-wrap flex-col md:flex-row justify-between border-b",children:[Object(y.jsx)("div",{className:"max-w-1/2 md:text-right p-2 mr-10 text-gray-500",children:t[a].key}),Object(y.jsx)("div",{className:"max-w-1/2 p-2",children:t[a].value})]},a));return Object(y.jsx)("div",{children:n})},re=function(e){for(var t=e.tabs,n=e.defaultTab,a=Object(r.useState)(n),s=Object(l.a)(a,2),i=s[0],c=s[1],o=[],d=function(e){o.push(Object(y.jsx)("button",{type:"button",className:"flex-initial p-4 cursor-pointer auto-rows-min border-r border-gray-300",onClick:function(){c(e)},children:t[e].title},e))},u=0;u<t.length;u++)d(u);return Object(y.jsxs)("div",{className:"grid grid-rows-2 grid-cols-1 shadow-md border border-gray-400",style:{gridTemplateRows:"min-content auto"},children:[Object(y.jsx)("div",{className:"flex border-b border-gray-300",children:o}),Object(y.jsx)("div",{className:"p-1 md:p-4",children:t[i].content})]})},se=function(e){var t,n,a,s,i=e.book,c=Object(r.useState)([{key:"Rok wydania",value:i.publishedDate},{key:"ID",value:i.id},{key:"Tytul",value:i.title},{key:"ISBN",value:i.isbn},{key:"Autorzy",value:null===(t=i.authors)||void 0===t?void 0:t.join(", ")},{key:"Kategorie",value:null===(n=i.categories)||void 0===n?void 0:n.join(", ")}]),o=Object(l.a)(c,1)[0],d=Object(r.useState)([{title:"Szczeg\xf3\u0142y",content:Object(y.jsx)("div",{className:"flex justify-center p-1 md:p-4",children:Object(y.jsx)(ae,{items:o})})}]),u=Object(l.a)(d,1)[0];Object(r.useEffect)((function(){window.scrollTo(0,0)}),[]);var b=Object(r.useState)(!1),j=Object(l.a)(b,2),m=j[0],x=j[1],h=q();return Object(y.jsxs)("div",{className:"w-11/12 m-auto mt-8",children:[Object(y.jsxs)("div",{className:"md:w-11/12 m-auto flex flex-wrap flex-col md:flex-row items-start",children:[Object(y.jsx)("div",{className:"m-auto flex flex-wrap flex-col items-start md:flex-row md:w-2/6",children:Object(y.jsx)("img",{onClick:function(){return x(!0)},src:i.imageLinks[0],alt:"A book.",className:"m-auto md:w-1/3 max-h-56 object-scale-down transform hover:scale-110 cursor-pointer w-32 pr-2 transition duration-400 ease-in-out hover:-translate-y-1"})}),Object(y.jsxs)("div",{className:"lg:w-2/3 flex-col lg:flex-row flex flex-wrap",children:[Object(y.jsxs)("div",{className:"lg:w-6/12 flex flex-auto flex-col",children:[Object(y.jsx)("span",{className:"text-xl",children:i.title})," ",Object(y.jsx)("br",{}),Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsx)("div",{className:"w-1/2 text-gray-600",children:null===(a=i.categories)||void 0===a?void 0:a.join(", ")}),Object(y.jsx)("div",{className:"w-1/2 text-right text-gray-600",children:null===(s=i.authors)||void 0===s?void 0:s.join(", ")})]}),Object(y.jsx)("div",{className:"mt-12 text-sm text-gray-700 text-justify",children:i.description})]}),Object(y.jsxs)("div",{className:"lg:w-2/12 mt-4 lg:ml-4",children:[Object(y.jsx)(z,{bare:!1,votesAmount:i.votesAmount,avgRating:i.avgRating}),Object(y.jsx)(V,{bookId:i.id,profileId:null===h||void 0===h?void 0:h.id,date:new Date,returnDate:new Date((new Date).setMonth((new Date).getMonth()+1)),quantity:i.quantity?i.quantity-1:-1})]})]})]}),Object(y.jsx)("div",{className:"w-full md:w-2/3 mt-8 m-auto",children:Object(y.jsx)(re,{tabs:u,defaultTab:0})}),m&&Object(y.jsx)("div",{className:"fixed left-0 top-0 pin z-50 overflow-auto bg-gray-400 bg-opacity-50 flex h-screen w-screen",onClick:function(){return x(!1)},children:Object(y.jsx)("div",{className:"relative m-auto flex-col flex rounded-md shadow-xl transform scale-150",children:Object(y.jsx)("img",{src:O(i),alt:"A book."})})})]})},ie=function(){var e=Object(T.i)(),t=Object(r.useState)(),n=Object(l.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){(function(){var t=Object(b.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.from("books").select("*").eq("id",e.id);case 2:n=t.sent,null!==(a=n.data)&&s(a[0]);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),a?Object(y.jsxs)("div",{className:"content-container",children:[Object(y.jsx)(Z,{}),Object(y.jsx)("div",{className:"mt-16 w-full",children:Object(y.jsx)(se,{book:a})})]}):Object(y.jsx)("span",{children:"Book doesn't exist"})},ce=function(e){var t=e.id,n=e.onBookDelete,a=e.title,s=Object(r.useState)(!1),i=Object(l.a)(s,2),c=i[0],o=i[1],d=function(){var e=Object(b.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("books").delete().match({id:t});case 2:a=e.sent,a.error&&N("There was a problem with deleting this book!","delete-book-error"),n();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{children:[Object(y.jsx)("button",{type:"button",className:"btn-page",onClick:function(){return o(!0)},children:"- Delete book"}),c&&Object(y.jsx)("div",{className:"fixed left-0 top-0 pin z-50 overflow-auto bg-gray-400 bg-opacity-50 flex h-screen w-screen",onClick:function(){return o(!1)},children:Object(y.jsxs)("div",{className:"relative p-8 bg-white w-full max-w-md m-auto flex-col flex rounded-md shadow-xl",children:[Object(y.jsxs)("p",{children:['Are you sure you want to delete this book from the stock: "',a,'"?']}),Object(y.jsx)("button",{type:"button",className:"btn-page",onClick:d,children:"- Delete book from stock"})]})})]})},oe=function(e){var t=e.id,n=e.title,a=e.authors,s=e.image,i=e.categories,c=e.quantity,o=e.onBookDelete,d=Object(r.useState)(0),j=Object(l.a)(d,2),m=j[0],x=j[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.from("borrowedBooks").select("*").eq("bookId",t);case 2:n=e.sent,null!==(a=n.data)&&x(a.length);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(y.jsxs)("div",{className:"flex flex-col sm:flex-row place-content-center max-w-full md:w-auto bg-gray-100 shadow-md p-3 m-3 mx-6",children:[Object(y.jsx)("img",{src:s,alt:"A book.",className:"m-3 w-32"}),Object(y.jsxs)("div",{className:"ml-2 w-full flex flex-col",children:[n,Object(y.jsx)("span",{className:"text-gray-400",children:null===a||void 0===a?void 0:a.join(" ")}),Object(y.jsx)("span",{className:"text-gray-400",children:i}),Object(y.jsxs)("span",{className:"text-gray-400",children:["Quantity of books in stock: ",c]}),Object(y.jsxs)("span",{className:"text-gray-400",children:["Quantity of borrowed books: ",m]})]}),Object(y.jsx)("div",{children:Object(y.jsx)(ce,{id:t,title:n,onBookDelete:o})})]})},le=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],s=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.from("books").select("*");case 2:t=e.sent,null!==(n=t.data)&&a(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){s()}),[]),Object(y.jsx)("div",{className:"container w-full h-full max-w-8xl mx-auto flex mt-3",children:Object(y.jsx)("div",{className:"min-w-0 w-full pt-3 flex-auto lg:static lg:max-h-full lg:overflow-visible shadow-inner",children:n&&(null===n||void 0===n?void 0:n.map((function(e){return Object(y.jsx)(oe,{id:e.id,title:e.title,image:e.imageLinks[0],isbn:e.isbn,authors:e.authors,publishedDate:e.publishedDate,categories:e.categories,description:e.description,quantity:e.quantity,onBookDelete:s},e.id)})))})})},de=n(63),ue=n.n(de),be=function(e){var t=e.id,n=e.quantity,a=e.onQuantityUpdate,r=function(){var e=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("books").update({quantity:n}).match({id:t});case 2:a(null!==n&&void 0!==n?n:0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)("div",{children:Object(y.jsx)("button",{type:"button",className:"btn-page",onClick:r,children:"+ Add books to the stock"})})},je=function(e){var t=e.id,n=e.title,a=e.authors,s=e.image,i=e.description,c=e.isbn,o=e.publishedDate,d=e.categories,j=e.quantity,m=q(),x=Object(r.useState)(),f=Object(l.a)(x,2),v=f[0],p=f[1],O=function(){var e=Object(b.a)(u.a.mark((function e(){var r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("books").insert({id:t,title:n,description:i,publishedDate:o,categories:d,isbn:c,imageLinks:[s],authors:a,votesAmount:Math.floor(1e3*Math.random())+1,avgRating:Math.floor(10*Math.random())+1,addedById:null===m||void 0===m?void 0:m.id,addedDate:new Date,quantity:j});case 2:r=e.sent,l=r.error,p(l);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{children:[Object(y.jsx)("button",{type:"button",className:"btn-page",onClick:O,children:"+ Add books to the stock"}),v&&N(v.message,"adding-book-error")]})},me=function(e){var t=e.id,n=e.title,a=e.authors,s=e.image,i=e.publishedDate,c=e.categories,o=e.description,d=e.isbn,j=Object(r.useState)("1"),m=Object(l.a)(j,2),x=m[0],h=m[1],v=Object(r.useState)(null),p=Object(l.a)(v,2),O=p[0],g=p[1],w=Object(r.useState)([]),k=Object(l.a)(w,2),N=k[0],C=k[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var n,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.from("books").select("\n      id, quantity\n    ").eq("id",t);case 2:n=e.sent,null!==(a=n.data)&&(C(a),g(null!==(r=null===(s=a[0])||void 0===s?void 0:s.quantity)&&void 0!==r?r:0));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(y.jsxs)("div",{className:"flex flex-col sm:flex-row place-content-center max-w-full md:w-auto bg-gray-100 shadow-md p-3 m-3 mx-6",children:[Object(y.jsx)("img",{src:s,alt:"A book.",className:"transform m-3 w-32"}),Object(y.jsxs)("div",{className:"ml-2 w-full flex flex-col",children:[n,Object(y.jsx)("span",{className:"text-gray-400",children:null===a||void 0===a?void 0:a.join(" ")}),Object(y.jsx)("span",{className:"text-gray-400",children:c})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("p",{children:"Quantity:"}),Object(y.jsx)("input",{id:"quantity",name:"quantity",type:"number",onChange:function(e){return h(e.target.value)}}),0!==(null===N||void 0===N?void 0:N.length)&&Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"bg-red-500 text-white",children:["In a stock: ",O," "]}),Object(y.jsx)(be,{id:t,quantity:Number(x)+(null!==O&&void 0!==O?O:0),onQuantityUpdate:function(e){return g(e)}})]}),0===(null===N||void 0===N?void 0:N.length)&&Object(y.jsx)(je,{id:t,title:n,authors:a,image:s,description:o,isbn:d,publishedDate:i,categories:c,quantity:Number(x)})]})]})},xe=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)("book"),i=Object(l.a)(s,2),c=i[0],o=i[1],d=Object(W.a)({initialValues:{filter:""},onSubmit:function(e){o(e.filter)}});return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(c));case 3:t=e.sent,a(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N("There was a problem with fetching data!","API-error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[c]),Object(y.jsxs)("div",{className:"container mx-auto mt-3 shadow-inner",children:[Object(y.jsx)("form",{onSubmit:d.handleSubmit,children:Object(y.jsx)("input",{id:"filter",name:"filter",type:"text",placeholder:"Search",onChange:d.handleChange,className:"input-pri mt-3 mx-6"})}),Object(y.jsx)("div",{children:n&&(null===n||void 0===n?void 0:n.items.map((function(e){var t,n,a,r,s,i;return Object(y.jsx)(me,{id:null!==(n=e.id)&&void 0!==n?n:"N/D",title:null!==(a=e.volumeInfo.title)&&void 0!==a?a:"N/D",description:null!==(r=e.volumeInfo.description)&&void 0!==r?r:"N/D",publishedDate:null!==(s=e.volumeInfo.publishedDate)&&void 0!==s?s:"N/D",image:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"".concat("/internships-2021","/image-not-found.png"),authors:e.volumeInfo.authors,categories:null!==(i=e.volumeInfo.categories)&&void 0!==i?i:["N/D"],isbn:e.volumeInfo.industryIdentifiers?e.volumeInfo.industryIdentifiers[0].identifier:"N/D"},null!==(t=e.id)&&void 0!==t?t:"N/D")})))})]})},he=function(e){var t=e.id,n=e.bookId,a=e.quantity,s=e.onBookReturn,i=e.title,c=Object(r.useState)(!1),o=Object(l.a)(c,2),d=o[0],j=o[1],m=function(){var e=Object(b.a)(u.a.mark((function e(){var r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("borrowedBooks").delete().match({id:t});case 2:return r=e.sent,i=r.error,e.next=6,h.from("books").update({quantity:a}).match({id:n});case 6:i&&N("There was a problem with returning this book!","return-book-error"),s();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{children:[Object(y.jsx)("button",{type:"button",className:"btn-page",onClick:function(){return j(!0)},children:"- Return Book"}),d&&Object(y.jsx)("div",{className:"fixed left-0 top-0 pin z-50 overflow-auto bg-gray-400 bg-opacity-50 flex h-screen w-screen",onClick:function(){return j(!1)},children:Object(y.jsxs)("div",{className:"relative p-8 bg-white w-full max-w-md m-auto flex-col flex rounded-md shadow-xl",children:[Object(y.jsxs)("p",{children:['Are you sure you want to return this book "',i,'"?']}),Object(y.jsx)("button",{type:"button",className:"btn-page",onClick:m,children:"- Retrun Book"})]})})]})},fe=function(e){var t,n,a,r,s,i,c=e.book,o=e.returnDate,l=e.date,d=e.id,u=e.onBookReturn;return Object(y.jsxs)("div",{className:"flex flex-col sm:flex-row place-content-center max-w-full md:w-auto bg-gray-50 shadow p-3 m-3 mx-6",children:[Object(y.jsx)("div",{className:"m-3 flex justify-center flex-wrap flex-col",children:Object(y.jsx)("div",{children:Object(y.jsx)("img",{src:O(c),alt:"".concat(null!==(t=c.title)&&void 0!==t?t:"N/D"," cover."),className:"w-32"})})}),Object(y.jsxs)("div",{className:"ml-2 mb-4 md:mb-0 w-full",children:[null!==(n=c.title)&&void 0!==n?n:"N/D",Object(y.jsxs)("div",{className:"text-gray-400 flex flex-col",children:[Object(y.jsx)("span",{children:null!==(a=null===(r=c.authors)||void 0===r?void 0:r.join(" "))&&void 0!==a?a:"N/D"}),Object(y.jsx)("span",{children:null!==(s=c.categories)&&void 0!==s?s:"N/D"}),Object(y.jsx)("div",{className:"overflow-hidden max-h-20 book-desc",children:null!==(i=c.description)&&void 0!==i?i:"N/D"}),Object(y.jsx)("div",{className:"flex h-4 mt-2",children:Object(y.jsx)(z,{votesAmount:c.votesAmount,avgRating:c.avgRating,bare:!0})})]}),Object(y.jsx)(he,{id:d,bookId:c.id,quantity:c.quantity+1,onBookReturn:u,title:c.title}),Object(y.jsxs)("p",{className:"text-right",children:["Date: ",l]}),Object(y.jsxs)("p",{className:"text-right",children:["Return date: ",o]})]})]})},ve=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],s=q(),i=Object(r.useCallback)(Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.from("borrowedBooks").select("id, date, returnDate, book:books(*)").eq("profileId",null===s||void 0===s?void 0:s.id);case 2:t=e.sent,null!==(n=t.data)&&a(n);case 5:case"end":return e.stop()}}),e)}))),[s]);return Object(r.useEffect)((function(){i()}),[i]),Object(y.jsxs)("div",{className:"container mx-auto mt-3 py-1 shadow-inner",children:[n&&(null===n||void 0===n?void 0:n.map((function(e){return Object(y.jsx)(fe,{book:e.book,returnDate:e.returnDate,date:e.date,id:e.id,onBookReturn:i},e.book.id)}))),n&&(null===n||void 0===n?void 0:n.length)<1&&Object(y.jsx)("div",{children:" NIE MA "})]})},pe=function(e){var t=e.path,n=e.exact,a=e.user,r=e.children;return!a&&B()?Object(y.jsx)("div",{children:"Loading..."}):D(a)?Object(y.jsxs)(T.b,{path:t,exact:n,children:[" ",r," "]}):Object(y.jsx)(T.a,{to:"/"})},Oe=function(e){var t=e.path,n=e.exact,a=e.children;return B()?Object(y.jsxs)(T.b,{path:t,exact:n,children:[" ",a," "]}):Object(y.jsx)(T.a,{to:"/"})},ge=function(){var e=Object(T.h)();return Object(y.jsxs)("div",{className:"flex flex-col items-center w-full",children:[Object(y.jsx)("h1",{className:"text-9xl tracking-wider",children:"404"}),Object(y.jsxs)("h3",{className:"text-3xl",children:["No match for path: ",Object(y.jsx)("code",{className:"font-black",children:e.pathname})]})]})},we=function(e){var t=e.url,n=e.className;return Object(y.jsx)("img",{className:"w-32 h-32 rounded-full object-cover ".concat(n),src:t,alt:"Zdj\u0119cie u\u017cytkownika"})},ke=n(64),Ne=n.n(ke),ye=function(e){var t=e.onAvatarChange,n=q(),a=Object(r.useState)(Object(r.useRef)(null)),s=Object(l.a)(a,1)[0],i=Object(r.useState)(""),c=Object(l.a)(i,2),o=c[0],d=c[1];Object(r.useEffect)((function(){Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d,e.next=3,R();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[]);var j=function(){var e=Object(b.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,R();case 3:n=e.sent,d(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=3;break}return N("File not found","file-not-found"),e.abrupt("return");case 3:if(n&&n.id){e.next=6;break}return N("Unknown user","unknown-user"),e.abrupt("return");case 6:return e.t0=Ne.a,e.next=9,t.arrayBuffer();case 9:return e.t1=e.sent,e.next=12,e.t0.fromBuffer.call(e.t0,e.t1);case 12:if("image/jpeg"===(null===(a=e.sent)||void 0===a?void 0:a.mime)||"image/png"===(null===a||void 0===a?void 0:a.mime)){e.next=16;break}return N("Invalid file type. Supported types: jpg, png.","invalid-file-type"),e.abrupt("return");case 16:return w("Uploading...","uploading"),e.next=19,f.storage.from("images").remove(["avatars/".concat(null===n||void 0===n?void 0:n.id)]);case 19:f.storage.from("images/avatars").upload("".concat(null===n||void 0===n?void 0:n.id),t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.error){e.next=2;break}throw t.error;case 2:return k("Upload successful","upload-success"),e.t0=d,e.next=6,R();case 6:e.t1=e.sent,(0,e.t0)(e.t1),j();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){N("Upload error (".concat(JSON.stringify(e),")"),"upload-error")}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"p-4",children:[Object(y.jsx)("h1",{className:"text-2xl",children:"Zmiana zdj\u0119cia u\u017cytkownika"}),Object(y.jsxs)("div",{className:"flex flex-wrap",children:[Object(y.jsx)(we,{url:o,className:""}),Object(y.jsxs)("div",{className:"flex flex-col flex-wrap place-content-end m-2",children:[Object(y.jsx)("input",{type:"file",accept:"image/jpeg, image/png",onChange:function(){var e,t,n;(null===s||void 0===s||null===(e=s.current)||void 0===e?void 0:e.files)&&(null===s||void 0===s||null===(t=s.current)||void 0===t?void 0:t.files.length)>0?m(null===s||void 0===s||null===(n=s.current)||void 0===n?void 0:n.files[0]):g("File not selected","file-not-selected")},ref:s,required:!0}),Object(y.jsx)("div",{className:"mt-4",children:Object(y.jsx)("button",{type:"button",className:"btn-page",onClick:function(){f.storage.from("images").remove(["avatars/".concat(null===n||void 0===n?void 0:n.id)]).then((function(){j(),w("Avatar has been successfully deleted","delete-avatar-success")})).catch((function(e){N("An error occured when removing avatar: ".concat(JSON.stringify(e)),"delete-avatar-error")}))},children:"Delete current avatar"})})]})]})]})},Ce=function(e){var t=e.onAvatarChange;return Object(y.jsx)("div",{className:"m-4",children:Object(y.jsx)(ye,{onAvatarChange:t})})},Se=(n(126),function(){var e=q(),t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,R();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(y.jsxs)("div",{className:"container mx-auto mt-3",children:[Object(y.jsx)("div",{className:"h-32 bg-gray-500 bg-no-repeat bg-center",style:{backgroundImage:"url(https://image.freepik.com/free-photo/hand-painted-watercolor-background-with-sky-clouds-shape_24972-1095.jpg)"}}),Object(y.jsx)("div",{className:"mx-16 bg-white relative -top-4 z-30",children:Object(y.jsxs)("div",{className:"shadow-md",children:[Object(y.jsxs)("div",{className:"flex flex-col md:flex-row",children:[Object(y.jsx)("div",{className:"w-1/4 relative h-24",children:Object(y.jsx)(we,{url:a,className:"relative -top-16 left-2"})}),Object(y.jsx)("div",{className:"mt-2 w-1/2",children:Object(y.jsxs)("div",{className:"flex uppercase",children:[Object(y.jsx)("div",{className:"w-min md:mr-2 first-l",children:null===e||void 0===e?void 0:e.firstName}),Object(y.jsx)("div",{className:"w-min first-l",children:null===e||void 0===e?void 0:e.lastName})]})}),Object(y.jsx)("div",{className:"text-gray-400 w-1/4 flex justify-end p-4",children:D(q())?"Administrator":"U\u017cytkownik"})]}),Object(y.jsx)("div",{className:"p-2",children:Object(y.jsx)(Ce,{onAvatarChange:Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,R();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))})})]})})]})}),Ae=(n(127),function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(T.g)();return Object(y.jsxs)("section",{className:"grid grid-cols-1 grid-rows-1 w-full home-dots-container h-40 mt-8",children:[Object(y.jsxs)("div",{className:"col-start-2 row-start-1 row-end-3 z-20 flex justify-center",children:[Object(y.jsx)("button",{className:"p-4 px-12 bg-white border border-gray-500",type:"button",onClick:function(){return a(!n)},children:"Join us!"}),n?Object(y.jsx)(ee,{onSuccess:function(){s.push("/books-list")},onVisibilityChange:function(){return a(!n)}}):Object(y.jsx)(y.Fragment,{})]}),Object(y.jsx)("div",{className:"col-start-1 row-start-2 row-end-4 col-span-full home-dots-gradient w-full bg-black"})]})}),Ie=function(e){var t=e.id,n=void 0===t?"":t,a=e.title,r=void 0===a?"":a,s=e.author,i=void 0===s?"":s,c=e.image,o=void 0===c?"":c,l=e.votesAmount,d=void 0===l?0:l,u=e.avgRating,b=void 0===u?0:u;return Object(y.jsxs)(E.b,{to:"/book/".concat(n),className:"flex flex-col justify-center items-center text-center",children:[Object(y.jsx)("div",{className:"gallery-tile",children:Object(y.jsx)("img",{src:o,alt:r,className:"gallery-img"})}),Object(y.jsxs)("div",{className:"flex flex-col items-center h-auto",children:[r.length>25?"".concat(r.substr(0,25).trim(),"..."):r,Object(y.jsx)("br",{}),i.length>0?Object(y.jsx)("span",{className:"text-gray-500 text-sm",children:i.length>20?"".concat(i.substr(0,20).trim(),"...\n"):"".concat(i,"\n")}):Object(y.jsx)("span",{className:"text-gray-500 text-sm",children:"No author"}),Object(y.jsx)("div",{className:"w-32 h-16",children:Object(y.jsx)(z,{bare:!0,votesAmount:d,avgRating:b})})]})]})},De=function(e){var t,n,a,s,i,c,o,d=e.entryCount,u=e.entries,b=Object(r.useState)(0),j=Object(l.a)(b,2),m=j[0],x=j[1],h=Object(r.useState)(),f=Object(l.a)(h,2),v=f[0],p=f[1];Object(r.useEffect)((function(){v&&clearTimeout(v);var e=setTimeout((function(){x(m===d-1?0:function(e){return e+1})}),2200);p(e)}),[m]);var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=m+e;return x(t>=d?0:t<=-1?d-1:t)};return Object(y.jsx)("div",{className:"flex mt-2 ml-6",children:Object(y.jsxs)("div",{className:"flex flex-col items-center bg-gray-50 shadow p-2",children:[Object(y.jsx)(Ie,{id:null===(t=u[m])||void 0===t?void 0:t.id,title:null===(n=u[m])||void 0===n?void 0:n.title,author:null===(a=u[m])||void 0===a||null===(s=a.authors)||void 0===s?void 0:s.join(" "),image:null===(i=u[m])||void 0===i?void 0:i.image,votesAmount:null===(c=u[m])||void 0===c?void 0:c.votesAmount,avgRating:null===(o=u[m])||void 0===o?void 0:o.avgRating}),Object(y.jsxs)("div",{className:"flex flex-row",children:[Object(y.jsx)("button",{className:"btn-page px-2",type:"button",onClick:function(){return O(-1)},children:"\u2b9c"}),Object(y.jsx)("div",{className:"w-80"}),Object(y.jsx)("button",{className:"btn-page px-2",type:"button",onClick:function(){return O(1)},children:"\u2b9e"})]})]})})},Be=function(e){var t=e.type,n=Object(r.useState)([]),a=Object(l.a)(n,2),s=a[0],i=a[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var n,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("top"!==t){e.next=9;break}return e.next=3,f.from("books").select("*").order("avgRating",{ascending:!1});case 3:n=e.sent,a=n.data,n.error||i(a),e.next=15;break;case 9:return e.next=11,f.from("books").select("*");case 11:r=e.sent,s=r.data,r.error||i(s);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),s?Object(y.jsx)(De,{entries:null===s||void 0===s?void 0:s.map((function(e){return{id:e.id,title:e.title,authors:e.authors,image:e.imageLinks[0],votesAmount:e.votesAmount,avgRating:e.avgRating}})),entryCount:10}):Object(y.jsx)("p",{children:"Loading..."})},qe=(n(128),function(e){var t=e.title,n=e.content,a=e.rightAligned,r=void 0!==a&&a;return Object(y.jsxs)("div",{className:"flex justify-between m-4 md:m-0 ".concat(r?"md:mr-12 flex-row-reverse":"md:ml-12"),children:[Object(y.jsx)("div",{className:"homepage-textbox w-full lg:w-3/5 ".concat(r?"self-end":"self-start"," \n      bg-white text-2xl shadow-md p-4 justify-self-start"),children:Object(y.jsxs)("div",{className:"h-full flex flex-col",children:[Object(y.jsx)("span",{className:"text-3xl font-bold mb-4",children:t}),Object(y.jsx)("p",{className:"text-justify",children:n})]})}),Object(y.jsx)("img",{src:"".concat("/internships-2021","/bubbles.svg"),alt:"Bubbles",className:"w-1/4 hidden md:block relative select-none\n        ".concat(r?"-left-6 homepage-bubble":"-right-12")})]})}),Fe=function(){var e={backgroundImage:"url(".concat("/internships-2021","/homepage-dotted-line.svg)")};return Object(y.jsxs)("div",{className:"flex flex-col gap-24 w-full",style:e,children:[Object(y.jsx)(qe,{title:"Who are we?",content:"We are a group of enthusiasts who love books! Have you ever had a problem, when you couldn't get your hands on a rare book? Or maybe you just don't feel like going the public library? That's when our site comes into play! Simply by making an account you can get access to tons of great books. Just look if we have what interests you in stock and borrow it!",rightAligned:!1}),Object(y.jsx)(qe,{title:"How does it work?",content:"It's simple. You make an account, look for the book of your choice and borrow it! Then you get to keep it for a month, when the time passes you will need to return it.",rightAligned:!0}),Object(y.jsx)(qe,{title:"How does it work?",content:"It's simple. You make an account, look for the book of your choice and borrow it! Then you get to keep it for a month, when the time passes you will need to return it.",rightAligned:!1}),Object(y.jsxs)("div",{className:"flex flex-row justify-evenly bg-gray-100 text-2xl shadow p-4",children:[Object(y.jsxs)("div",{className:"flex-col items-center",children:["Our top books:",Object(y.jsx)(Be,{type:"top"})]}),Object(y.jsx)("div",{id:"spacer"}),Object(y.jsxs)("div",{className:"flex-col items-center",children:["Some of our books:",Object(y.jsx)(Be,{type:"random"})]})]})]})},Re=(n(129),function(){return Object(y.jsx)("section",{className:"w-screen h-screen bg-gray-900",children:Object(y.jsxs)("div",{className:"h-full w-full grid grid-rows-1 grid-cols-1 justify-center",children:[Object(y.jsx)("div",{className:"row-start-1 col-start-1 flex justify-center",children:Object(y.jsx)("img",{className:"object-contain",src:"".concat("/internships-2021","/homepage-landscape-bg.png"),alt:"ok"})}),Object(y.jsx)("div",{className:"h-full w-full row-start-1 col-start-1 bg-opacity-60 bg-black",children:Object(y.jsxs)("div",{className:"grid h-full w-full landing-page-container text-white",children:[Object(y.jsxs)("nav",{className:"col-span-full p-4 flex flex-col md:flex-row justify-between",children:[Object(y.jsx)("div",{className:"landing-page-nav-item-container",children:Object(y.jsxs)("span",{children:[Object(y.jsx)("span",{className:"flex flex-row items-center",children:Object(y.jsx)("span",{children:"Home"})}),Object(y.jsx)("hr",{className:"main-underline mt-2"})]})}),Object(y.jsx)("div",{className:"landing-page-nav-item-container",children:Object(y.jsx)(E.b,{to:"/books-list",children:Object(y.jsxs)("span",{children:["Check out the book list!",Object(y.jsx)("hr",{className:"main-underline mt-2 ml-auto"})]})})})]}),Object(y.jsxs)("div",{className:"col-start-2 row-start-2 landing-page-grid-item-container",children:[Object(y.jsx)("hr",{className:"main-underline"}),Object(y.jsx)("span",{className:"text-3xl font-bold",children:'Library "SIEMA"'})]}),Object(y.jsx)("div",{className:"col-start-2 row-start-3 landing-page-grid-item-container",children:Object(y.jsx)("span",{className:"text-3xl font-semibold",children:"Key features"})}),Object(y.jsx)("div",{className:"col-start-2 row-start-4 landing-page-grid-item-container",children:Object(y.jsx)("span",{className:"landing-page-our-features",children:"Quality"})}),Object(y.jsx)("div",{className:"col-start-1 row-start-4 landing-page-grid-item-container",children:Object(y.jsx)("span",{className:"landing-page-our-features",children:"Vast range of books"})}),Object(y.jsx)("div",{className:"col-start-3 row-start-4 landing-page-grid-item-container",children:Object(y.jsx)("span",{className:"landing-page-our-features",children:"Tradition"})})]})})]})})}),Le=function(){return Object(y.jsxs)("section",{className:"mx-auto flex flex-col items-center gap-2 overflow-hidden",children:[Object(y.jsx)(Re,{}),Object(y.jsx)(Fe,{}),Object(y.jsx)(Ae,{})]})};var Ee=function(){var e=q();return Object(y.jsx)("div",{className:"h-full",children:Object(y.jsx)(E.a,{basename:"/internships-2021",children:Object(y.jsxs)(T.d,{children:[Object(y.jsx)(T.b,{path:"/internships-2021",exact:!0,children:Object(y.jsx)(T.a,{to:"/"})}),Object(y.jsx)(T.b,{path:"/",exact:!0,children:Object(y.jsx)(Le,{})}),Object(y.jsxs)(T.b,{children:[Object(y.jsx)("header",{className:"sticky top-0 w-full h-10 z-50",children:Object(y.jsx)(ne,{})}),Object(y.jsxs)(T.d,{children:[Object(y.jsx)(Oe,{path:"/user",exact:!0,user:e,children:Object(y.jsx)(Se,{})}),Object(y.jsx)(Oe,{path:"/user/books",exact:!0,user:e,children:Object(y.jsx)(ve,{})}),Object(y.jsx)(pe,{path:"/admin/owned",exact:!0,user:e,children:Object(y.jsx)(le,{})}),Object(y.jsx)(pe,{path:"/admin/store",exact:!0,user:e,children:Object(y.jsx)(xe,{})}),Object(y.jsx)(T.b,{path:"/books-list",exact:!0,children:Object(y.jsx)(T.a,{to:"/books-list/*/0"})}),Object(y.jsx)(T.b,{path:"/books-list/:q?/:rating?",children:Object(y.jsx)(K,{})}),Object(y.jsx)(T.b,{path:"/book/:id",exact:!0,children:Object(y.jsx)(ie,{})}),Object(y.jsx)(T.b,{path:"*",children:Object(y.jsx)(ge,{})})]})]})]})})})},Te=function(){return Object(y.jsx)(L,{children:Object(y.jsx)(Ee,{})})},Pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,133)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))};c.a.render(Object(y.jsxs)(s.a.StrictMode,{children:[Object(y.jsx)(o.b,{position:"bottom-right",transition:o.a,autoClose:6e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(y.jsx)(Te,{})]}),document.getElementById("root")),Pe()},42:function(e,t,n){},70:function(e,t,n){}},[[130,1,2]]]);
//# sourceMappingURL=main.5e0ae402.chunk.js.map