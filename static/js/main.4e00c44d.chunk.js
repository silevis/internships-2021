(this["webpackJsonpinternships-2021"]=this["webpackJsonpinternships-2021"]||[]).push([[0],{126:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var a,r=n(1),s=n.n(r),i=n(27),c=n.n(i),l=(n(70),n(14)),o=n(3),d=n(2),u=n.n(d),b=n(4),j=n(65),m=String("https://foammhipcaktheiqbvqe.supabase.co"),x=String("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyNjI3MTA5MiwiZXhwIjoxOTQxODQ3MDkyfQ.eL3JU79VGLK32aPQDh9JZ-hsHCOtTN9EESh07e96FeM"),h=Object(j.a)(m,x),f=h,v=n(0),p=s.a.createContext(null),O=s.a.createContext(null),g=null!==(a=f.auth.user())&&void 0!==a?a:null,w=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.from("profiles").select("\n      *\n    ").eq("id",null!==t&&void 0!==t?t:"");case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){return null===e||void 0===e?void 0:e.isAdmin},k=function(){return f.auth.user()},y=function(){return Object(r.useContext)(p)},C=function(){return Object(r.useContext)(O)},S=function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.abrupt("return",f.storage.from("images/avatars").createSignedUrl("".concat(null===(t=g)||void 0===t?void 0:t.id),43200));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){var t,n,a=e.children,s=Object(r.useState)(null),i=Object(o.a)(s,2),c=i[0],l=i[1];(g=f.auth.user(),c)||w(null!==(t=null===(n=g)||void 0===n?void 0:n.id)&&void 0!==t?t:"").then((function(e){var t,n,a,r,s=null===e||void 0===e?void 0:e[0];l({id:null!==(t=null===s||void 0===s?void 0:s.id)&&void 0!==t?t:"",firstName:null!==(n=null===s||void 0===s?void 0:s.firstName)&&void 0!==n?n:"",lastName:null!==(a=null===s||void 0===s?void 0:s.lastName)&&void 0!==a?a:"",email:null!==(r=null===s||void 0===s?void 0:s.email)&&void 0!==r?r:"",avatarUrl:""})}));return Object(v.jsx)(p.Provider,{value:c,children:Object(v.jsx)(O.Provider,{value:function(e){l(e)},children:a})})},I=n(8),q=n(5),B="".concat("/internships-2021","/image-not-found.png");function A(e){var t;return(null===e||void 0===e||null===(t=e.imageLinks)||void 0===t?void 0:t.length)<=e.featuredImageId?B:e.imageLinks[e.featuredImageId]}var L=function(e){var t=e.urlBlank,n=e.urlFull,a=e.fillingPercent,r={clipPath:"polygon(0 0, ".concat(a,"% 0, ").concat(a,"% 100%, 0 100%)")};return Object(v.jsx)("div",{className:"w-full h-full",children:100===a?Object(v.jsx)("img",{src:n,alt:"Filled ranking icon",className:"w-full h-full"}):Object(v.jsxs)("div",{className:"grid grid-cols-1 grid-rows-1 w-full h-full",children:[0!==a&&Object(v.jsx)("img",{src:n,style:r,alt:"Blank ranking icon",className:"col-start-1 col-end-2 row-start-1 row-end-2 w-full h-full"}),Object(v.jsx)("img",{src:t,alt:"Blank ranking icon",className:"col-start-1 col-end-2 row-start-1 row-end-2 w-full h-full"})]})})},U="".concat("/internships-2021","/star_border_black.svg"),F="".concat("/internships-2021","/star_black.svg"),E=function(e){for(var t=e.bare,n=e.votesAmount,a=e.avgRating,r=[],s=a/10*100,i=0;i<5;i++)r.push(Object(v.jsx)(L,{urlBlank:U,urlFull:F,fillingPercent:Math.floor(Math.max(0,Math.min(100,5*s)))},i)),s-=20;return Object(v.jsxs)("div",{className:"flex flex-wrap justify-center items-center flex-col",children:[Object(v.jsx)("div",{className:"flex justify-between w-full h-full",children:r}),!t&&Object(v.jsxs)("span",{className:"text-gray-600 text-xs mt-1",children:["Ilosc g\u0142os\xf3w: ",n]}),!t&&Object(v.jsxs)("span",{className:"text-gray-600 text-xs mt-1",children:["Srednia ocena: ",Math.round(100*a)/100]})]})},P=(n(42),n(43),function(e){var t=e.bookId,n=e.profileId,a=e.date,r=e.returnDate,s=e.quantity,i=function(){var e=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.auth.user()){e.next=11;break}if(!(s>=0)){e.next=8;break}return e.next=4,f.from("borrowedBooks").insert({bookId:t,profileId:n,date:a,returnDate:r});case 4:return e.next=6,f.from("books").update({quantity:s}).match({id:t});case 6:e.next=9;break;case 8:l.c.error("We don't have this book in stock right now",{toastId:"borrow-book-warning",position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0});case 9:e.next=12;break;case 11:l.c.warn("You must be logged in to borrow a book!",{toastId:"borrow-book-warning",position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{children:Object(v.jsx)("button",{type:"button",className:"btn-page",onClick:i,children:"Borrow a book"})})}),R=function(e){var t,n,a,r,s,i,c=e.book,l=y();return Object(v.jsxs)("div",{className:"flex flex-col sm:flex-row place-content-center max-w-full md:w-auto bg-gray-50 shadow p-3 m-3 mx-6",children:[Object(v.jsx)("div",{className:"m-3 flex justify-center",children:Object(v.jsx)(I.b,{to:"/book/".concat(c.id),children:Object(v.jsx)("img",{src:A(c),alt:"Zdjecie okladki ".concat(null!==(t=c.title)&&void 0!==t?t:"N/D"),className:"transform hover:scale-110 cursor-pointer w-32 transition duration-400 ease-in-out hover:-translate-y-1"})})}),Object(v.jsxs)("div",{className:"ml-2 mb-4 md:mb-0 w-full",children:[Object(v.jsx)("span",{className:"break-words cursor-pointer transition duration-400 ease-in-out hover:text-gray-500",children:Object(v.jsx)(I.b,{to:"/book/".concat(c.id),children:null!==(n=c.title)&&void 0!==n?n:"N/D"})}),Object(v.jsxs)("div",{className:"text-gray-400 flex flex-col",children:[Object(v.jsx)("span",{children:null!==(a=null===(r=c.authors)||void 0===r?void 0:r.join(" "))&&void 0!==a?a:"N/D"}),Object(v.jsx)("span",{children:null!==(s=c.categories)&&void 0!==s?s:"N/D"}),Object(v.jsx)("div",{className:"overflow-hidden max-h-20 book-desc",children:null!==(i=c.description)&&void 0!==i?i:"N/D"}),Object(v.jsx)("div",{className:"flex h-4 mt-2",children:Object(v.jsx)(E,{votesAmount:c.votesAmount,avgRating:c.avgRating,bare:!0})})]})]}),Object(v.jsx)("div",{children:Object(v.jsx)(P,{bookId:c.id,profileId:null===l||void 0===l?void 0:l.id,date:new Date,returnDate:new Date((new Date).setMonth((new Date).getMonth()+1)),quantity:c.quantity?c.quantity-1:-1})})]})},M=function(){var e=Object(r.useState)(0),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)("*"),i=Object(o.a)(s,2),c=i[0],l=i[1],d=Object(r.useState)(!0),u=Object(o.a)(d,2),b=u[0],j=u[1],m=Object(q.g)();return Object(v.jsxs)("div",{className:"flex justify-between bg-white",children:[Object(v.jsx)("div",{className:"bg-white inline z-40 ".concat(b?"hidden":"fixed lg:static"),children:Object(v.jsx)("button",{type:"button",className:"btn-sidebar lg:hidden",onClick:function(){return j(!b)},children:"\u2b9c"})}),Object(v.jsx)("div",{className:"lg:block z-30 inset-0 flex-none min-h-screen h-full lg:h-auto bg-white ml-6 lg:mt-0 lg:ml-0 pb-10 lg:pt-0\n        w-72 shadow-sm dark:bg-gray-800 overflow-y-auto lg:overflow-y-visible ".concat(b?"hidden":"fixed lg:static"),children:Object(v.jsxs)("div",{className:"items-center justify-between scrolling-touch fixed top-14 max-h-screen overflow-y-auto pb-8",children:[Object(v.jsx)("div",{className:"border-b border-gray-400 mx-4 my-5 pl-2 text-l font-bold",children:"Filters"}),Object(v.jsxs)("nav",{className:"mx-4 my-3",children:[Object(v.jsxs)("div",{className:"border-b border-gray-200 mx-1 pb-5 mt-5",children:[Object(v.jsx)("label",{htmlFor:"searchbar",className:"mr-2",children:"Search"}),Object(v.jsx)("input",{type:"text",placeholder:"Enter book name",id:"searchbar",className:"p-1 placeholder-gray-400 text-gray-600 border outline-none transition duration-300 ease-in-out focus:ring-2 ring-gray-200",onChange:function(e){var t,n;String(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value).length>0?l(String(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)):l("*")}})]}),Object(v.jsx)("div",{className:"border-b border-gray-200 mx-1 pl-4 pb-5 mt-5",children:Object(v.jsxs)("ul",{className:"list-disc",children:[Object(v.jsx)("li",{children:"Fiction"}),Object(v.jsx)("li",{children:"Literature of fact, journalism"}),Object(v.jsx)("li",{children:"Popular science literature"}),Object(v.jsx)("li",{children:"Children's literature"}),Object(v.jsx)("li",{children:"Comics"}),Object(v.jsx)("li",{children:"Poetry, drama satire"}),Object(v.jsx)("li",{children:"Other"})]})}),Object(v.jsxs)("div",{className:"border-b border-gray-200 mx-1 pl-4 pb-5 mt-5",children:[Object(v.jsx)("input",{type:"range",min:"0",max:"10",defaultValue:"0",onChange:function(e){var t;a(Number(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}}),Object(v.jsx)("span",{className:"ml-2",id:"range",children:n>0?n:"All"})]}),Object(v.jsx)("div",{className:"flex border-b border-gray-200 mx-1 pl-4 pb-5 mt-5 place-content-center",children:Object(v.jsx)("button",{className:"btn-page w-2/3",type:"button",onClick:function(){return m.replace("/books-list/".concat(c,"/").concat(n))},children:"Filter"})})]})]})}),Object(v.jsx)("div",{className:"inline z-40 ".concat(b?"fixed":"hidden"),children:Object(v.jsx)("button",{type:"button",className:"btn-sidebar lg:hidden",onClick:function(){j(!b)},children:"\u2b9e"})})]})},T=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(q.i)(),i=s.rating;return Object(r.useEffect)((function(){var e;(null===s||void 0===s||null===(e=s.q)||void 0===e?void 0:e.length)<1&&(s.q="*"),function(){var e=Object(b.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="%".concat(s.q?s.q:"*","%"),e.next=3,f.from("books").select("*").ilike("title",t).gte("avgRating",i);case 3:n=e.sent,null!==(r=n.data)&&a(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[s,i]),Object(v.jsxs)("div",{className:"content-container",children:[Object(v.jsx)(M,{}),Object(v.jsxs)("div",{className:"mt-3 w-full shadow-inner",children:[n&&(null===n||void 0===n?void 0:n.map((function(e){return Object(v.jsx)(R,{book:e},e.id)}))),n&&(null===n||void 0===n?void 0:n.length)<1&&Object(v.jsx)("div",{className:"flex justify-center italic",children:"No results"})]})]})},z=n(22),J=function(e){var t=e.title,n=e.okButtonLabel,a=e.onVisibilityChange,r=e.onOkButtonClick,s=e.children;return Object(v.jsx)("div",{className:"fixed left-0 top-0 pin z-50 overflow-auto bg-gray-400 bg-opacity-50 flex h-screen w-screen",children:Object(v.jsxs)("div",{className:"relative p-8 bg-white w-full max-w-md m-auto flex-col flex rounded-md shadow-xl",children:[Object(v.jsxs)("div",{className:"flex justify-between",children:[Object(v.jsx)("h1",{className:"font-bold",children:t}),Object(v.jsx)("button",{type:"button",onClick:function(){return a()},className:"btn-exit",children:"X"})]}),Object(v.jsx)("div",{children:s}),Object(v.jsx)("button",{type:"submit",className:"btn-page",onClick:function(){return r()},children:n})]})})},V=function(){var e=C(),t=Object(r.useState)(!1),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(),c=Object(o.a)(i,2),l=c[0],d=c[1],j=Object(z.a)({initialValues:{emailAdress:"",password:""},onSubmit:function(){var t=Object(b.a)(u.a.mark((function t(n){var r,i,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.auth.signIn({email:n.emailAdress,password:n.password});case 2:if(r=t.sent,i=r.user,!(c=r.error)){t.next=8;break}return d(c.message),t.abrupt("return");case 8:i&&e&&(w(null===i||void 0===i?void 0:i.id).then(function(){var t=Object(b.a)(u.a.mark((function t(n){var a,r,s,i,c,l,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=null===n||void 0===n?void 0:n[0],t.t0=e,t.t1=null!==(a=null===o||void 0===o?void 0:o.id)&&void 0!==a?a:"",t.t2=null!==(r=null===o||void 0===o?void 0:o.firstName)&&void 0!==r?r:"unknown",t.t3=null!==(s=null===o||void 0===o?void 0:o.lastName)&&void 0!==s?s:"unknown",t.t4=null!==(i=null===o||void 0===o?void 0:o.email)&&void 0!==i?i:"no email",t.next=8,S();case 8:if(t.t7=l=t.sent,t.t6=null===t.t7,t.t6){t.next=12;break}t.t6=void 0===l;case 12:if(!t.t6){t.next=16;break}t.t8=void 0,t.next=17;break;case 16:t.t8=l.signedURL;case 17:if(t.t9=c=t.t8,t.t5=null!==t.t9,!t.t5){t.next=21;break}t.t5=void 0!==c;case 21:if(!t.t5){t.next=25;break}t.t10=c,t.next=26;break;case 25:t.t10="".concat("/internships-2021","/image-not-found.png");case 26:t.t11=t.t10,t.t12={id:t.t1,firstName:t.t2,lastName:t.t3,email:t.t4,avatarUrl:t.t11},(0,t.t0)(t.t12);case 29:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),s(!a),d(""));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),m=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("profiles").select("email").eq("email",j.values.emailAdress);case 2:t=e.sent,(null===(n=t.data)||void 0===n?void 0:n.length)||d("There's no user associated with this email");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"btn-nav text-left relative",children:Object(v.jsx)("button",{type:"button",onClick:function(){return s(!a)},children:"Sign In"})}),a&&Object(v.jsx)(J,{title:"Login",okButtonLabel:"Sign In",onOkButtonClick:function(){return j.submitForm()},onVisibilityChange:function(){return s(!a)},children:Object(v.jsxs)("form",{onSubmit:j.handleSubmit,children:[Object(v.jsxs)("div",{className:"flex content-between",children:[Object(v.jsxs)("div",{className:"mr-1 flex-auto",children:[Object(v.jsx)("label",{htmlFor:"email-adress",className:"text-xs block",children:"Email adress:"}),Object(v.jsx)("input",{id:"emailAdress",name:"emailAdress",type:"email",placeholder:"Email-adress",onChange:j.handleChange,onBlur:m,value:j.values.emailAdress,className:"input-pri"})]}),Object(v.jsx)("div",{className:"flex flex-auto flex-col items-end",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{htmlFor:"password",className:"text-xs block",children:"Password:"}),Object(v.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Password",onChange:j.handleChange,value:j.values.password,className:"input-pri"})]})})]}),Object(v.jsx)("p",{className:"text-red-500 mb-4",children:l})]})})]})},Q=function(e){var t=e.title,n=e.items,a=e.logOut,s=Object(r.useState)(!1),i=Object(o.a)(s,2),c=i[0],l=i[1];return Object(v.jsxs)("div",{className:"relative btn-nav-end",children:[Object(v.jsx)("button",{type:"button",className:"navbar-nav text-left relative",onClick:function(){return l(!c)},children:t}),c&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"hidden md:flex md:fixed left-0 top-0 pin z-40 overflow-auto bg-white bg-opacity-0 h-screen w-screen",onClick:function(){return l(!c)},children:"\xa0"}),Object(v.jsxs)("div",{className:"dropdown block md:absolute top-0 left-0 w-auto overflow-hidden md:-translate-y-0 z-50 bg-gray-700 md:bg-gray-600 text-white border-none md:border border-gray-400 md:border-gray-800 rounded-sm",children:[n.map((function(e){return Object(v.jsx)("div",{className:"menu-item border-b border-gray-400 md:border-gray-700",children:Object(v.jsx)("button",{type:"button",children:Object(v.jsx)(I.b,{to:"".concat(e.link),className:"cursor-pointer transition duration-400 ease-in-out hover:text-indigo-500",children:e.label})})})})),Object(v.jsx)("div",{className:"menu-item",children:Object(v.jsx)("button",{type:"button",onClick:a,className:"cursor-pointer transition duration-400 ease-in-out hover:text-indigo-500",children:"Logout"})})]})]})]})},H=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(),i=Object(o.a)(s,2),c=i[0],l=i[1],d=Object(z.a)({initialValues:{emailAdress:"",password:"",firstName:"",lastName:""},onSubmit:function(){var e=Object(b.a)(u.a.mark((function e(t){var r,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.auth.signUp({email:t.emailAdress,password:t.password});case 2:if(r=e.sent,s=r.user,!(i=r.error)){e.next=8;break}return l(i.message),e.abrupt("return");case 8:if(!s){e.next=12;break}return e.next=11,h.from("profiles").insert({id:s.id,firstName:t.firstName,lastName:t.lastName,email:t.emailAdress}).then((function(e){l(e.statusText)}));case 11:a(!n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),j=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("profiles").select("email").eq("email",d.values.emailAdress);case 2:t=e.sent,(null===(n=t.data)||void 0===n?void 0:n.length)||l("A user with this email address has already been registered");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"btn-nav-end text-left relative",children:Object(v.jsx)("button",{type:"button",onClick:function(){return a(!n)},children:"Sign Up"})}),n&&Object(v.jsx)(J,{title:"Register",okButtonLabel:"Sign Up",onOkButtonClick:function(){return d.submitForm()},onVisibilityChange:function(){return a(!n)},children:Object(v.jsxs)("form",{onSubmit:d.handleSubmit,children:[Object(v.jsxs)("div",{className:"flex justify-between",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{htmlFor:"firstName",className:"text-xs block",children:"First Name:"}),Object(v.jsx)("input",{id:"firstName",name:"firstName",type:"text",placeholder:"First Name",onChange:d.handleChange,value:d.values.firstName,className:"input-pri"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{htmlFor:"lastName",className:"text-xs block",children:"Last Name:"}),Object(v.jsx)("input",{id:"lastName",name:"lastName",type:"text",placeholder:"Last Name",onChange:d.handleChange,value:d.values.lastName,className:"input-pri"})]})]}),Object(v.jsxs)("div",{className:"flex justify-between",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{htmlFor:"email-adress",className:"text-xs block",children:"Email adress:"}),Object(v.jsx)("input",{id:"emailAdress",name:"emailAdress",type:"email",placeholder:"Email-adress",onChange:d.handleChange,onBlur:j,value:d.values.emailAdress,className:"input-pri"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{htmlFor:"password",className:"text-xs block",children:"Password:"}),Object(v.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Password",onChange:d.handleChange,value:d.values.password,className:"input-pri"})]})]}),Object(v.jsx)("p",{className:"text-red-500 mb-4",children:c})]})})]})},Z=function(e){var t,n=Object(r.useState)(),a=Object(o.a)(n,2),s=a[0],i=a[1];return Object(r.useEffect)((function(){e&&function(){var t=Object(b.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.from("profiles").select("\n      *\n    ").eq("id",e);case 2:n=t.sent,a=n.data,i(a);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e]),(null===s||void 0===s||null===(t=s[0])||void 0===t?void 0:t.id)!==e?null:e?null===s||void 0===s?void 0:s[0]:null},_=function(){var e,t=y(),n=C(),a=Object(r.useState)(!1),s=Object(o.a)(a,2),i=s[0],c=s[1],l=Object(q.g)(),d=Z(null!==(e=null===t||void 0===t?void 0:t.id)&&void 0!==e?e:null),u=Object(r.useState)([{link:"/user",label:"User Profile"},{link:"/user/books",label:"User Books"}]),b=Object(o.a)(u,2),j=b[0],m=b[1];Object(r.useEffect)((function(){N(d)?m([{link:"/user",label:"User Profile"},{link:"/user/books",label:"User Books"},{link:"/admin/owned",label:"Owned"},{link:"/admin/store",label:"Store"}]):m([{link:"/user",label:"User Profile"},{link:"/user/books",label:"User Books"}])}),[d]);return Object(v.jsx)("nav",{className:"bg-gray-700 shadow dark:bg-gray-800",children:Object(v.jsxs)("div",{className:"container px-6 py-3 mx-auto md:flex md:justify-between md:items-center",children:[Object(v.jsxs)("div",{className:"flex items-center justify-between",children:[Object(v.jsx)(I.b,{to:"/",children:Object(v.jsx)("div",{children:Object(v.jsx)("span",{className:"text-xl font-bold text-white dark:text-white md:text-2xl",children:"Books"})})}),Object(v.jsx)("button",{type:"button",className:"border-gray-400 text-gray-200 rounded-md border max-h-full px-1 transition duration-500 ease-in-out hover:bg-gray-200 hover:text-gray-700 md:hidden",onClick:function(){return c(!i)},children:"\u2630"})]}),Object(v.jsx)("div",{className:i?"block items-center md:flex":"hidden md:block items-center",children:Object(v.jsxs)("div",{className:"flex flex-col md:flex-row my-2 md:my-0 md:mx-6",children:[Object(v.jsx)("button",{type:"button",className:"btn-nav text-left relative",children:Object(v.jsx)(I.b,{to:"/",children:"Home"})}),Object(v.jsx)("button",{type:"button",className:"btn-nav text-left relative",children:Object(v.jsx)(I.b,{to:"/books-list",children:"Book List"})}),k()?Object(v.jsx)(Q,{title:null===t||void 0===t?void 0:t.email,items:j,logOut:function(){n&&n({id:"",firstName:"",lastName:"",email:"",avatarUrl:""}),f.auth.signOut(),l.push("/")}}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(V,{}),Object(v.jsx)(H,{})]})]})})]})})},X=function(e){for(var t=e.items,n=[],a=0;a<t.length;a++)n.push(Object(v.jsxs)("div",{className:"flex flex-wrap flex-col md:flex-row justify-between border-b",children:[Object(v.jsx)("div",{className:"max-w-1/2 md:text-right p-2 mr-10 text-gray-500",children:t[a].key}),Object(v.jsx)("div",{className:"max-w-1/2 p-2",children:t[a].value})]}));return Object(v.jsx)("div",{children:n})},Y=function(e){for(var t=e.tabs,n=e.defaultTab,a=Object(r.useState)(n),s=Object(o.a)(a,2),i=s[0],c=s[1],l=[],d=function(e){l.push(Object(v.jsx)("button",{type:"button",className:"flex-initial p-4 cursor-pointer auto-rows-min border-r border-gray-300",onClick:function(){c(e)},children:t[e].title}))},u=0;u<t.length;u++)d(u);return Object(v.jsxs)("div",{className:"grid grid-rows-2 grid-cols-1 shadow-md border border-gray-400",style:{gridTemplateRows:"min-content auto"},children:[Object(v.jsx)("div",{className:"flex border-b border-gray-300",children:l}),Object(v.jsx)("div",{className:"p-1 md:p-4",children:t[i].content})]})},G=function(e){var t,n,a,s,i=e.book,c=Object(r.useState)([{key:"Rok wydania",value:i.publishedDate},{key:"ID",value:i.id},{key:"Tytul",value:i.title},{key:"ISBN",value:i.isbn},{key:"Autorzy",value:null===(t=i.authors)||void 0===t?void 0:t.join(", ")},{key:"Kategorie",value:null===(n=i.categories)||void 0===n?void 0:n.join(", ")}]),l=Object(o.a)(c,1)[0],d=Object(r.useState)([{title:"Szczeg\xf3\u0142y",content:Object(v.jsx)("div",{className:"flex justify-center p-1 md:p-4",children:Object(v.jsx)(X,{items:l})})}]),u=Object(o.a)(d,1)[0];Object(r.useEffect)((function(){window.scrollTo(0,0)}),[]);var b=Object(r.useState)(!1),j=Object(o.a)(b,2),m=j[0],x=j[1],h=y();return Object(v.jsxs)("div",{className:"w-11/12 m-auto mt-8",children:[Object(v.jsxs)("div",{className:"md:w-11/12 m-auto flex flex-wrap flex-col md:flex-row items-start",children:[Object(v.jsx)("div",{className:"m-auto flex flex-wrap flex-col items-start md:flex-row md:w-2/6",children:Object(v.jsx)("img",{onClick:function(){return x(!0)},src:i.imageLinks[0],alt:"A book.",className:"m-auto md:w-1/3 max-h-56 object-scale-down transform hover:scale-110 cursor-pointer w-32 pr-2 transition duration-400 ease-in-out hover:-translate-y-1"})}),Object(v.jsxs)("div",{className:"lg:w-2/3 flex-col lg:flex-row flex flex-wrap",children:[Object(v.jsxs)("div",{className:"lg:w-6/12 flex flex-auto flex-col",children:[Object(v.jsx)("span",{className:"text-xl",children:i.title})," ",Object(v.jsx)("br",{}),Object(v.jsxs)("div",{className:"flex",children:[Object(v.jsx)("div",{className:"w-1/2 text-gray-600",children:null===(a=i.categories)||void 0===a?void 0:a.join(", ")}),Object(v.jsx)("div",{className:"w-1/2 text-right text-gray-600",children:null===(s=i.authors)||void 0===s?void 0:s.join(", ")})]}),Object(v.jsx)("div",{className:"mt-12 text-sm text-gray-700 text-justify",children:i.description})]}),Object(v.jsxs)("div",{className:"lg:w-2/12 mt-4 lg:ml-4",children:[Object(v.jsx)(E,{bare:!1,votesAmount:i.votesAmount,avgRating:i.avgRating}),Object(v.jsx)(P,{bookId:i.id,profileId:null===h||void 0===h?void 0:h.id,date:new Date,returnDate:new Date((new Date).setMonth((new Date).getMonth()+1)),quantity:i.quantity?i.quantity-1:-1})]})]})]}),Object(v.jsx)("div",{className:"w-full md:w-2/3 mt-8 m-auto",children:Object(v.jsx)(Y,{tabs:u,defaultTab:0})}),m&&Object(v.jsx)("div",{className:"fixed left-0 top-0 pin z-50 overflow-auto bg-gray-400 bg-opacity-50 flex h-screen w-screen",onClick:function(){return x(!1)},children:Object(v.jsx)("div",{className:"relative m-auto flex-col flex rounded-md shadow-xl transform scale-150",children:Object(v.jsx)("img",{src:A(i),alt:"A book."})})})]})},K=function(){var e=Object(q.i)(),t=Object(r.useState)(),n=Object(o.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){(function(){var t=Object(b.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.from("books").select("*").eq("id",e.id);case 2:n=t.sent,null!==(a=n.data)&&s(a[0]);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),a?Object(v.jsxs)("div",{className:"content-container",children:[Object(v.jsx)(M,{}),Object(v.jsx)("div",{className:"mt-16 w-full",children:Object(v.jsx)(G,{book:a})})]}):Object(v.jsx)("span",{children:"Book doesn't exist"})},W=function(e){var t=e.id,n=e.onBookDelete,a=e.title,s=Object(r.useState)(!1),i=Object(o.a)(s,2),c=i[0],d=i[1],j=Object(r.useState)(),m=Object(o.a)(j,2),x=m[0],f=m[1],p=function(){var e=Object(b.a)(u.a.mark((function e(){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("books").delete().match({id:t});case 2:a=e.sent,r=a.error,f(r),n();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{type:"button",className:"btn-page",onClick:function(){return d(!0)},children:"- Delete book"}),c&&Object(v.jsx)("div",{className:"fixed left-0 top-0 pin z-50 overflow-auto bg-gray-400 bg-opacity-50 flex h-screen w-screen",onClick:function(){return d(!1)},children:Object(v.jsxs)("div",{className:"relative p-8 bg-white w-full max-w-md m-auto flex-col flex rounded-md shadow-xl",children:[Object(v.jsxs)("p",{children:['Are you sure you want to delete this book from the stock: "',a,'"?']}),Object(v.jsx)("button",{type:"button",className:"btn-page",onClick:p,children:"- Delete book from stock"})]})}),x&&l.c.error("There was a problem with deleting this book!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})]})},$=function(e){var t=e.id,n=e.title,a=e.authors,r=e.image,s=e.categories,i=e.quantity,c=e.onBookDelete;return Object(v.jsxs)("div",{className:"flex flex-col sm:flex-row place-content-center max-w-full md:w-auto bg-gray-100 shadow-md p-3 m-3 mx-6",children:[Object(v.jsx)("img",{src:r,alt:"A book.",className:"m-3 w-32"}),Object(v.jsxs)("div",{className:"ml-2 w-full flex flex-col",children:[n,Object(v.jsx)("span",{className:"text-gray-400",children:null===a||void 0===a?void 0:a.join(" ")}),Object(v.jsx)("span",{className:"text-gray-400",children:s}),Object(v.jsxs)("span",{className:"text-gray-400",children:["Quantity of books in stock: ",i]})]}),Object(v.jsx)("div",{children:Object(v.jsx)(W,{id:t,title:n,onBookDelete:c})})]})},ee=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],s=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.from("books").select("*");case 2:t=e.sent,null!==(n=t.data)&&a(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){s()}),[]),Object(v.jsx)("div",{className:"container w-full h-full max-w-8xl mx-auto flex mt-3",children:Object(v.jsx)("div",{className:"min-w-0 w-full pt-3 flex-auto lg:static lg:max-h-full lg:overflow-visible shadow-inner",children:n&&(null===n||void 0===n?void 0:n.map((function(e){return Object(v.jsx)($,{id:e.id,title:e.title,image:e.imageLinks[0],isbn:e.isbn,authors:e.authors,publishedDate:e.publishedDate,categories:e.categories,description:e.description,quantity:e.quantity,onBookDelete:s},e.id)})))})})},te=n(63),ne=n.n(te),ae=function(e){var t=e.id,n=e.quantity,a=e.onQuantityUpdate,r=function(){var e=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("books").update({quantity:n}).match({id:t});case 2:a(null!==n&&void 0!==n?n:0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{children:Object(v.jsx)("button",{type:"button",className:"btn-page",onClick:r,children:"+ Add books to the stock"})})},re=function(e){var t=e.id,n=e.title,a=e.authors,s=e.image,i=e.description,c=e.isbn,d=e.publishedDate,j=e.categories,m=e.quantity,x=y(),f=Object(r.useState)(),p=Object(o.a)(f,2),O=p[0],g=p[1],w=function(){var e=Object(b.a)(u.a.mark((function e(){var r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("books").insert({id:t,title:n,description:i,publishedDate:d,categories:j,isbn:c,imageLinks:[s],authors:a,votesAmount:Math.floor(1e3*Math.random())+1,avgRating:Math.floor(10*Math.random())+1,addedById:null===x||void 0===x?void 0:x.id,addedDate:new Date,quantity:m});case 2:r=e.sent,l=r.error,g(l);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{type:"button",className:"btn-page",onClick:w,children:"+ Add books to the stock"}),O&&l.c.error(O.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})]})},se=function(e){var t=e.id,n=e.title,a=e.authors,s=e.image,i=e.publishedDate,c=e.categories,l=e.description,d=e.isbn,j=Object(r.useState)("1"),m=Object(o.a)(j,2),x=m[0],h=m[1],p=Object(r.useState)(null),O=Object(o.a)(p,2),g=O[0],w=O[1],N=Object(r.useState)([]),k=Object(o.a)(N,2),y=k[0],C=k[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var n,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.from("books").select("\n      id, quantity\n    ").eq("id",t);case 2:n=e.sent,null!==(a=n.data)&&(C(a),w(null!==(r=null===(s=a[0])||void 0===s?void 0:s.quantity)&&void 0!==r?r:0));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(v.jsxs)("div",{className:"flex flex-col sm:flex-row place-content-center max-w-full md:w-auto bg-gray-100 shadow-md p-3 m-3 mx-6",children:[Object(v.jsx)("img",{src:s,alt:"A book.",className:"transform m-3 w-32"}),Object(v.jsxs)("div",{className:"ml-2 w-full flex flex-col",children:[n,Object(v.jsx)("span",{className:"text-gray-400",children:null===a||void 0===a?void 0:a.join(" ")}),Object(v.jsx)("span",{className:"text-gray-400",children:c})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{children:"Quantity:"}),Object(v.jsx)("input",{id:"quantity",name:"quantity",type:"number",onChange:function(e){return h(e.target.value)}}),0!==(null===y||void 0===y?void 0:y.length)&&Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"bg-red-500 text-white",children:["In a stock: ",g," "]}),Object(v.jsx)(ae,{id:t,quantity:Number(x)+(null!==g&&void 0!==g?g:0),onQuantityUpdate:function(e){return w(e)}})]}),0===(null===y||void 0===y?void 0:y.length)&&Object(v.jsx)(re,{id:t,title:n,authors:a,image:s,description:l,isbn:d,publishedDate:i,categories:c,quantity:Number(x)})]})]})},ie=function(){var e=Object(r.useState)(),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(),i=Object(o.a)(s,2),c=i[0],l=i[1],d=Object(r.useState)("book"),j=Object(o.a)(d,2),m=j[0],x=j[1],h=Object(z.a)({initialValues:{filter:""},onSubmit:function(e){x(e.filter)}});return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!1),e.next=4,ne.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(m));case 4:t=e.sent,a(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l(!0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[m]),Object(v.jsxs)("div",{className:"container mx-auto mt-3 shadow-inner",children:[Object(v.jsx)("form",{onSubmit:h.handleSubmit,children:Object(v.jsx)("input",{id:"filter",name:"filter",type:"text",placeholder:"Search",onChange:h.handleChange,className:"input-pri mt-3 mx-6"})}),Object(v.jsxs)("div",{children:[n&&(null===n||void 0===n?void 0:n.items.map((function(e){var t,n,a,r,s,i;return Object(v.jsx)(se,{id:null!==(n=e.id)&&void 0!==n?n:"N/D",title:null!==(a=e.volumeInfo.title)&&void 0!==a?a:"N/D",description:null!==(r=e.volumeInfo.description)&&void 0!==r?r:"N/D",publishedDate:null!==(s=e.volumeInfo.publishedDate)&&void 0!==s?s:"N/D",image:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"".concat("/internships-2021","/image-not-found.png"),authors:e.volumeInfo.authors,categories:null!==(i=e.volumeInfo.categories)&&void 0!==i?i:["N/D"],isbn:e.volumeInfo.industryIdentifiers?e.volumeInfo.industryIdentifiers[0].identifier:"N/D"},null!==(t=e.id)&&void 0!==t?t:"N/D")}))),c&&Object(v.jsx)("p",{className:"text-red-600",children:"There was an error while trying to fetch data!"})]})]})},ce=function(e){var t=e.path,n=e.exact,a=e.user,r=e.children;return!a&&k()?Object(v.jsx)("div",{children:"Loading..."}):N(a)?Object(v.jsxs)(q.b,{path:t,exact:n,children:[" ",r," "]}):Object(v.jsx)(q.a,{to:"/"})},le=function(){var e=Object(q.h)();return Object(v.jsxs)("div",{className:"flex flex-col items-center w-full",children:[Object(v.jsx)("h1",{className:"text-9xl tracking-wider",children:"404"}),Object(v.jsxs)("h3",{className:"text-3xl",children:["No match for path: ",Object(v.jsx)("code",{className:"font-black",children:e.pathname})]})]})},oe=function(e){var t=e.url,n=e.className;return Object(v.jsx)("img",{className:"w-32 h-32 rounded-full object-cover ".concat(n),src:t,alt:"Zdj\u0119cie u\u017cytkownika"})},de=n(64),ue=n.n(de),be=function(){var e=y(),t=Object(r.useState)(Object(r.useRef)(null)),n=Object(o.a)(t,1)[0],a=Object(r.useState)(),s=Object(o.a)(a,2),i=s[0],c=s[1],l=Object(r.useState)(""),d=Object(o.a)(l,2),j=d[0],m=d[1];Object(r.useEffect)((function(){Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S().then((function(e){(null===e||void 0===e?void 0:e.signedURL)&&m(null===e||void 0===e?void 0:e.signedURL)}));case 2:case"end":return e.stop()}}),e)})))()}),[j]);var x=function(){var t=Object(b.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n){t.next=3;break}return c("File not found."),t.abrupt("return");case 3:if(e&&e.id){t.next=6;break}return c("Unknown user"),t.abrupt("return");case 6:return t.t0=ue.a,t.next=9,n.arrayBuffer();case 9:return t.t1=t.sent,t.next=12,t.t0.fromBuffer.call(t.t0,t.t1);case 12:if("image/jpeg"===(null===(a=t.sent)||void 0===a?void 0:a.mime)||"image/png"===(null===a||void 0===a?void 0:a.mime)){t.next=16;break}return c("Invalid file type. Supported types: jpg, png."),t.abrupt("return");case 16:return c("Uploading..."),t.next=19,f.storage.from("images").remove(["avatars/".concat(null===e||void 0===e?void 0:e.id)]);case 19:f.storage.from("images/avatars").upload("".concat(null===e||void 0===e?void 0:e.id),n).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.error){e.next=2;break}throw t.error;case 2:return c("Upload successful."),e.next=5,S();case 5:(null===(n=e.sent)||void 0===n?void 0:n.signedURL)&&m(null===n||void 0===n?void 0:n.signedURL);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){c("Upload error (".concat(JSON.stringify(e),")"))}));case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"p-4",children:[Object(v.jsx)("h1",{className:"text-2xl",children:"Zmiana zdj\u0119cia u\u017cytkownika"}),Object(v.jsxs)("div",{className:"flex flex-wrap",children:[Object(v.jsx)(oe,{url:j,className:""}),Object(v.jsxs)("div",{className:"flex flex-col flex-wrap place-content-end m-2",children:[Object(v.jsx)("input",{type:"file",accept:"image/jpeg, image/png",ref:n,required:!0}),Object(v.jsxs)("div",{className:"mt-4",children:[Object(v.jsx)("button",{type:"button",onClick:function(){var e,t,a;(null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.files)&&(null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t.files.length)>0?x(null===n||void 0===n||null===(a=n.current)||void 0===a?void 0:a.files[0]):c("File not selected.")},children:"Upload file"}),Object(v.jsxs)("div",{className:"text-xs h-4",children:[Object(v.jsx)("label",{className:"text-gray-500",children:"Status: "}),i]})]})]})]})]})},je=function(){return Object(v.jsx)("div",{className:"m-4",children:Object(v.jsx)(be,{})})},me=(n(126),function(){var e=y(),t=Object(r.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S().then((function(e){(null===e||void 0===e?void 0:e.signedURL)&&s(null===e||void 0===e?void 0:e.signedURL)}));case 2:case"end":return e.stop()}}),e)})))()}),[]),Object(v.jsxs)("div",{className:"container mx-auto mt-3",children:[Object(v.jsx)("div",{className:"h-32 bg-gray-500 bg-no-repeat bg-center",style:{backgroundImage:"url(https://image.freepik.com/free-photo/hand-painted-watercolor-background-with-sky-clouds-shape_24972-1095.jpg)"}}),Object(v.jsx)("div",{className:"mx-16 bg-white relative -top-4 z-30",children:Object(v.jsxs)("div",{className:"shadow-md",children:[Object(v.jsxs)("div",{className:"flex flex-col md:flex-row",children:[Object(v.jsx)("div",{className:"w-1/4 relative h-24",children:Object(v.jsx)(oe,{url:a,className:"relative -top-16 left-2"})}),Object(v.jsx)("div",{className:"mt-2 w-1/2",children:Object(v.jsxs)("div",{className:"flex uppercase",children:[Object(v.jsx)("div",{className:"w-min md:mr-2 first-l",children:null===e||void 0===e?void 0:e.firstName}),Object(v.jsx)("div",{className:"w-min first-l",children:null===e||void 0===e?void 0:e.lastName})]})})]}),Object(v.jsx)("div",{className:"p-2",children:Object(v.jsx)(je,{})})]})})]})}),xe=function(e){var t=e.id,n=void 0===t?"":t,a=e.title,r=void 0===a?"":a,s=e.author,i=void 0===s?"":s,c=e.image,l=void 0===c?"":c;return Object(v.jsxs)(I.b,{to:"/book/".concat(n),className:"flex flex-col justify-center items-center text-center h-72 w-64 ",children:[Object(v.jsx)("img",{src:l,alt:r,className:"w-48 h-64 overflow-hidden"}),"".concat(r,"\n"),Object(v.jsx)("span",{className:"text-gray-500 text-sm",children:i})]})},he=function(e){var t,n,a,s,i,c=e.entryCount,l=e.entries,d=Object(r.useState)(0),u=Object(o.a)(d,2),b=u[0],j=u[1],m=Object(r.useState)(),x=Object(o.a)(m,2),h=x[0],f=x[1];Object(r.useEffect)((function(){h&&clearTimeout(h);var e=setTimeout((function(){j(b===c-1?0:function(e){return e+1})}),2200);f(e)}),[b]);var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=b+e;return j(t>=c?0:t<=-1?c-1:t)};return Object(v.jsx)("div",{className:"flex place-content-start mt-2 ml-6",children:Object(v.jsxs)("div",{className:"flex flex-col items-center bg-gray-50 shadow p-2",children:[Object(v.jsx)(xe,{id:null===(t=l[b])||void 0===t?void 0:t.id,title:null===(n=l[b])||void 0===n?void 0:n.title,author:null===(a=l[b])||void 0===a||null===(s=a.authors)||void 0===s?void 0:s.join(" "),image:null===(i=l[b])||void 0===i?void 0:i.image}),Object(v.jsxs)("div",{className:"flex flex-row",children:[Object(v.jsx)("button",{className:"btn-page px-2",type:"button",onClick:function(){return p(-1)},children:"\u2b9c"}),Object(v.jsx)("div",{className:"w-80"}),Object(v.jsx)("button",{className:"btn-page px-2",type:"button",onClick:function(){return p(1)},children:"\u2b9e"})]})]})})},fe=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.from("books").select("\n      *\n    ");case 2:t=e.sent,n=t.data,a(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),n?Object(v.jsx)(he,{entries:null===n||void 0===n?void 0:n.map((function(e){return{id:e.id,title:e.title,authors:e.authors,image:e.imageLinks[0]}})),entryCount:n.length}):Object(v.jsx)("p",{children:"Loading..."})},ve=function(e){var t,n,a,r,s,i,c=e.book,l=e.returnDate,o=e.date;return Object(v.jsxs)("div",{className:"flex flex-col sm:flex-row place-content-center max-w-full md:w-auto bg-gray-50 shadow p-3 m-3 mx-6",children:[Object(v.jsx)("div",{className:"m-3 flex justify-center flex-wrap flex-col",children:Object(v.jsx)("div",{children:Object(v.jsx)("img",{src:A(c),alt:"Zdjecie okladki ".concat(null!==(t=c.title)&&void 0!==t?t:"N/D"),className:"transform hover:scale-110 cursor-pointer w-32 transition duration-400 ease-in-out hover:-translate-y-1"})})}),Object(v.jsxs)("div",{className:"ml-2 mb-4 md:mb-0 w-full",children:[Object(v.jsx)("span",{className:"break-words cursor-pointer transition duration-400 ease-in-out hover:text-gray-500",children:null!==(n=c.title)&&void 0!==n?n:"N/D"}),Object(v.jsxs)("div",{className:"text-gray-400 flex flex-col",children:[Object(v.jsx)("span",{children:null!==(a=null===(r=c.authors)||void 0===r?void 0:r.join(" "))&&void 0!==a?a:"N/D"}),Object(v.jsx)("span",{children:null!==(s=c.categories)&&void 0!==s?s:"N/D"}),Object(v.jsx)("div",{className:"overflow-hidden max-h-20 book-desc",children:null!==(i=c.description)&&void 0!==i?i:"N/D"}),Object(v.jsx)("div",{className:"flex h-4 mt-2",children:Object(v.jsx)(E,{votesAmount:c.votesAmount,avgRating:c.avgRating,bare:!0})})]}),Object(v.jsxs)("p",{className:"text-right",children:["Date: ",o]}),Object(v.jsxs)("p",{className:"text-right",children:["Return date: ",l]})]})]})},pe=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],s=y();return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.from("borrowedBooks").select("date, returnDate, book:books(*)").eq("profileId",null===s||void 0===s?void 0:s.id);case 2:t=e.sent,null!==(n=t.data)&&a(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]),Object(v.jsxs)("div",{className:"container mx-auto mt-3 py-1 shadow-inner",children:[n&&(null===n||void 0===n?void 0:n.map((function(e){return Object(v.jsx)(ve,{book:e.book,returnDate:e.returnDate,date:e.date},e.book.id)}))),n&&(null===n||void 0===n?void 0:n.length)<1&&Object(v.jsx)("div",{children:" NIE MA "})]})},Oe=function(){var e,t=y(),n=Z(null!==(e=null===t||void 0===t?void 0:t.id)&&void 0!==e?e:null);return Object(v.jsx)("div",{className:"h-full",children:Object(v.jsxs)(I.a,{basename:"/internships-2021",children:[Object(v.jsx)("header",{className:"sticky top-0 w-full h-10 z-50",children:Object(v.jsx)(_,{})}),Object(v.jsxs)(q.d,{children:[Object(v.jsx)(q.b,{path:"/internships-2021",exact:!0,children:Object(v.jsx)(q.a,{to:"/"})}),Object(v.jsx)(q.b,{path:"/",exact:!0,children:Object(v.jsx)(fe,{})}),Object(v.jsx)(q.b,{path:"/user",exact:!0,children:Object(v.jsx)(me,{})}),Object(v.jsx)(q.b,{path:"/user/books",exact:!0,children:Object(v.jsx)(pe,{})}),Object(v.jsx)(ce,{path:"/admin/owned",exact:!0,user:n,children:Object(v.jsx)(ee,{})}),Object(v.jsx)(ce,{path:"/admin/store",exact:!0,user:n,children:Object(v.jsx)(ie,{})}),Object(v.jsx)(q.b,{path:"/books-list",exact:!0,children:Object(v.jsx)(q.a,{to:"/books-list/*/0"})}),Object(v.jsx)(q.b,{path:"/books-list/:q?/:rating?",children:Object(v.jsx)(T,{})}),Object(v.jsx)(q.b,{path:"/book/:id",exact:!0,children:Object(v.jsx)(K,{})}),Object(v.jsx)(q.b,{path:"*",children:Object(v.jsx)(le,{})})]})]})})},ge=function(){return Object(v.jsx)(D,{children:Object(v.jsx)(Oe,{})})},we=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,130)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))};c.a.render(Object(v.jsxs)(s.a.StrictMode,{children:[Object(v.jsx)(l.b,{position:"top-right",transition:l.a,autoClose:6e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(v.jsx)(ge,{})]}),document.getElementById("root")),we()},42:function(e,t,n){},70:function(e,t,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.4e00c44d.chunk.js.map