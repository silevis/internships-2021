(this["webpackJsonpinternships-2021"]=this["webpackJsonpinternships-2021"]||[]).push([[0],{141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){"use strict";n.r(t);var a,r=n(1),s=n.n(r),c=n(42),i=n.n(c),o=(n(85),n(28)),l=n(8),u=n(4),d=n(2),b=n.n(d),j=n(5),x=n(80),m=String("https://foammhipcaktheiqbvqe.supabase.co"),f=String("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyNjI3MTA5MiwiZXhwIjoxOTQxODQ3MDkyfQ.eL3JU79VGLK32aPQDh9JZ-hsHCOtTN9EESh07e96FeM"),h=Object(x.a)(m,f),v=h,p="".concat("/internships-2021","/image-not-found.png"),g="".concat("/internships-2021","/defaultAvatar.png"),O=function(e){var t;return(null===e||void 0===e||null===(t=e.imageLinks)||void 0===t?void 0:t.length)<=e.featuredImageId?p:e.imageLinks[e.featuredImageId]},w=function(e,t){o.c.warn(e,{toastId:t,autoClose:6e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0})},k=function(e,t){o.c.info(e,{toastId:t,autoClose:6e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0})},y=function(e,t){o.c.success(e,{toastId:t,autoClose:6e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0})},N=function(e,t){o.c.error(e,{toastId:t,autoClose:6e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0})},C=n(0),S=s.a.createContext(null),D=s.a.createContext(null),I=null!==(a=v.auth.user())&&void 0!==a?a:null,A=function(){var e=Object(j.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,v.from("profiles").select("\n      *\n    ").eq("id",null!==t&&void 0!==t?t:"");case 4:return n=e.sent,a=n.data,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){return null===e||void 0===e?void 0:e.isAdmin},q=function(){return v.auth.user()},L=function(){return Object(r.useContext)(S)},E=function(){return Object(r.useContext)(D)},P=function(){var e=Object(j.a)(b.a.mark((function e(){var t,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I){e.next=2;break}return e.abrupt("return",g);case 2:return e.next=4,v.storage.from("images/avatars").createSignedUrl("".concat(null===(t=I)||void 0===t?void 0:t.id),43200);case 4:return n=e.sent,a=n.signedURL,e.abrupt("return",null!==a&&void 0!==a?a:g);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e){var t,n,a=e.children,s=Object(r.useState)(null),c=Object(u.a)(s,2),i=c[0],o=c[1];(I=v.auth.user(),i)||A(null!==(t=null===(n=I)||void 0===n?void 0:n.id)&&void 0!==t?t:"").then((function(e){var t,n,a,r,s,c,i,l=null===e||void 0===e?void 0:e[0];o({createdAt:null!==(t=null===l||void 0===l?void 0:l.createdAt)&&void 0!==t?t:"",email:null!==(n=null===l||void 0===l?void 0:l.email)&&void 0!==n?n:"",firstName:null!==(a=null===l||void 0===l?void 0:l.firstName)&&void 0!==a?a:"",id:null!==(r=null===l||void 0===l?void 0:l.id)&&void 0!==r?r:"",status:null!==(s=null===l||void 0===l?void 0:l.status)&&void 0!==s?s:"",isAdmin:null!==(c=null===l||void 0===l?void 0:l.isAdmin)&&void 0!==c&&c,lastName:null!==(i=null===l||void 0===l?void 0:l.lastName)&&void 0!==i?i:""})}));return Object(C.jsx)(S.Provider,{value:i,children:Object(C.jsx)(D.Provider,{value:function(e){o(e)},children:a})})},R=n(7),M=n(150),T=n(149),U=function(e){var t=e.urlBlank,n=e.urlFull,a=e.fillingPercent,r={clipPath:"polygon(0 0, ".concat(a,"% 0, ").concat(a,"% 100%, 0 100%)")};return Object(C.jsx)("div",{className:"w-full h-full",children:100===a?Object(C.jsx)("img",{src:n,alt:"Filled ranking icon",className:"w-full h-full"}):Object(C.jsxs)("div",{className:"grid grid-cols-1 grid-rows-1 w-full h-full",children:[0!==a&&Object(C.jsx)("img",{src:n,style:r,alt:"Blank ranking icon",className:"col-start-1 col-end-2 row-start-1 row-end-2 w-full h-full"}),Object(C.jsx)("img",{src:t,alt:"Blank ranking icon",className:"col-start-1 col-end-2 row-start-1 row-end-2 w-full h-full"})]})})},z="".concat("/internships-2021","/star_border_black.svg"),V="".concat("/internships-2021","/star_black.svg"),J=function(e){for(var t=e.bare,n=e.votesAmount,a=e.avgRating,r=[],s=a/10*100,c=0;c<5;c++)r.push(Object(C.jsx)(U,{urlBlank:z,urlFull:V,fillingPercent:Math.floor(Math.max(0,Math.min(100,5*s)))},c)),s-=20;return Object(C.jsxs)("div",{className:"flex flex-wrap justify-center items-center flex-col",children:[Object(C.jsx)("div",{className:"flex justify-between w-full h-full",children:r}),!t&&Object(C.jsxs)("span",{className:"text-gray-600 text-xs mt-1 dark:text-white",children:["Number of votes: ",n]}),!t&&Object(C.jsxs)("span",{className:"text-gray-600 text-xs mt-1 mb-2 dark:text-white",children:["Average rating: ",Math.round(100*a)/100]})]})},Q=(n(47),n(48),function(e){var t=e.bookId,n=e.profileId,a=e.date,r=e.returnDate,s=e.quantity,c=e.onBookBorrow,i=function(){var e=Object(j.a)(b.a.mark((function e(){var i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.auth.user()){e.next=21;break}return e.next=3,v.from("borrowedBooks").select("id").match({bookId:t,profileId:n});case 3:if(i=e.sent,null===(o=i.data)||void 0===o?void 0:o.length){e.next=18;break}if(!(s>=0)){e.next=15;break}return e.next=9,v.from("borrowedBooks").insert({bookId:t,profileId:n,date:a,returnDate:r});case 9:return e.next=11,v.from("books").update({quantity:s}).match({id:t});case 11:y("Book borrowed successfully!","borrow-book-success"),c(),e.next=16;break;case 15:N("This book is not in stock right now","borrow-book-error");case 16:e.next=19;break;case 18:N("You have already borrowed this book","borrow-book-warning");case 19:e.next=22;break;case 21:w("You must be logged in to borrow a book!","borrow-book-warning");case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{children:Object(C.jsx)("button",{type:"button",className:"btn-page",onClick:i,children:"Borrow a book"})})}),H=function(e){var t,n,a,s,c,i,o=e.book,d=L(),x=Object(r.useState)(!1),m=Object(u.a)(x,2),f=m[0],h=m[1],p=Object(r.useCallback)(Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.auth.user()){e.next=9;break}return e.next=3,v.from("borrowedBooks").select("id").match({bookId:o.id,profileId:null===d||void 0===d?void 0:d.id});case 3:if(t=e.sent,!(null===(n=t.data)||void 0===n?void 0:n.length)){e.next=8;break}return h(!0),e.abrupt("return");case 8:h(!1);case 9:case"end":return e.stop()}}),e)}))),[o,d]);return Object(r.useEffect)((function(){p()}),[p]),Object(C.jsxs)(T.a.div,{className:"flex flex-col place-content-center max-w-full bg-white shadow p-3 m-3 mx-6 sm:flex-row md:w-auto dark:bg-gray-600 dark:text-white",variants:{hidden:{x:-100},shown:{x:0}},initial:"hidden",animate:"shown",children:[Object(C.jsx)("div",{className:"m-3 flex justify-center",children:Object(C.jsx)(l.b,{to:"/book/".concat(o.id),children:Object(C.jsx)("img",{src:O(o),alt:"".concat(null!==(t=o.title)&&void 0!==t?t:"N/D"," cover."),className:"transform hover:scale-110 cursor-pointer w-32 transition duration-400 ease-in-out hover:-translate-y-1"})})}),Object(C.jsxs)("div",{className:"ml-2 mb-4 md:mb-0 w-full",children:[Object(C.jsx)("span",{className:"break-words cursor-pointer transition duration-300 ease-in-out hover:text-gray-500 dark:hover:text-black",children:Object(C.jsx)(l.b,{to:"/book/".concat(o.id),children:null!==(n=o.title)&&void 0!==n?n:"N/D"})}),Object(C.jsxs)("div",{className:"text-gray-400 flex flex-col",children:[Object(C.jsx)("span",{children:null!==(a=null===(s=o.authors)||void 0===s?void 0:s.join(" "))&&void 0!==a?a:"N/D"}),Object(C.jsx)("span",{children:null!==(c=o.categories)&&void 0!==c?c:"N/D"}),Object(C.jsx)("div",{className:"overflow-hidden max-h-20 book-desc",children:null!==(i=o.description)&&void 0!==i?i:"N/D"}),Object(C.jsx)("div",{className:"flex h-4 mt-2",children:Object(C.jsx)(J,{votesAmount:o.votesAmount,avgRating:o.avgRating,bare:!0})})]})]}),Object(C.jsxs)("div",{children:[!f&&Object(C.jsx)(Q,{bookId:o.id,profileId:null===d||void 0===d?void 0:d.id,date:new Date,returnDate:new Date((new Date).setMonth((new Date).getMonth()+1)),quantity:o.quantity?o.quantity-1:-1,onBookBorrow:p}),f&&Object(C.jsx)("span",{className:"dark:text-gray-200",children:"You have already borrowed this book"})]})]})},Y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!1;return"*"===t||(null===e||void 0===e||e.forEach((function(e){(n&&e.toLowerCase()===t.toLowerCase()||e.toLowerCase().includes(t.toLowerCase()))&&(a=!0)})),a)},W=function(){var e=Object(j.a)(b.a.mark((function e(t,n,a){var r,s,c,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="%".concat(t,"%"),t.length<1&&(s="*"),e.next=4,v.from("books").select("*").ilike("title",s).gte("avgRating",n).gte("quantity",1);case 4:return c=e.sent,i=c.data,o=null!==(r=null===i||void 0===i?void 0:i.filter((function(e){return Y(null===e||void 0===e?void 0:e.categories,a,!0)})))&&void 0!==r?r:[],e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),X=function(){var e=Object(j.a)(b.a.mark((function e(t,n,a){var r,s,c,i,o,l,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t,t.length<1&&(c="*"),e.next=4,v.from("books").select("*").gte("avgRating",n).gte("quantity",1);case 4:return i=e.sent,o=i.data,l=null!==(r=null===o||void 0===o?void 0:o.filter((function(e){return Y(e.authors,c)})))&&void 0!==r?r:[],u=null!==(s=null===l||void 0===l?void 0:l.filter((function(e){return Y(null===e||void 0===e?void 0:e.categories,a,!0)})))&&void 0!==s?s:[],e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(j.a)(b.a.mark((function e(){var t,n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.from("books").select("categories");case 2:return t=e.sent,n=t.data,a=[],null===(r=null===n||void 0===n?void 0:n.map((function(e){return e.categories})))||void 0===r||r.forEach((function(e){return!a.includes(e[0])&&a.push(e[0])})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G="title",K="*",Z=function(e){G=e},$=function(e){K=e},ee=function(){return G},te=function(){return K},ne=function(){var e=Object(r.useState)(0),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)("*"),c=Object(u.a)(s,2),i=c[0],o=c[1],l=Object(r.useState)(!0),d=Object(u.a)(l,2),b=d[0],j=d[1],x=Object(r.useState)(),m=Object(u.a)(x,2),f=m[0],h=m[1],v=Object(R.g)();return Object(r.useEffect)((function(){_().then((function(e){return h(e)}))}),[]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"bg-white inline z-40 ".concat(b?"hidden":"fixed lg:static"),children:Object(C.jsx)("button",{type:"button",className:"btn-sidebar lg:hidden",onClick:function(){return j(!b)},children:"\u2b9c"})}),Object(C.jsx)("div",{className:"lg:block lg:h-auto lg:mt-0 lg:ml-0 lg:pt-0 lg:overflow-y-visible ".concat(b?"hidden":"fixed lg:static","\n        border-white bg-white\n        z-30 inset-0 flex-none min-h-screen h-full ml-6 pb-10 border-l-2 border-r-2 w-72 shadow-sm overflow-y-auto\n        dark:bg-gray-800 dark:border-gray-600"),children:Object(C.jsxs)("div",{className:"dark:text-gray-300 items-center justify-between scrolling-touch fixed top-14 max-h-screen overflow-y-auto pb-8",children:[Object(C.jsx)("div",{className:"border-b border-gray-400 mx-4 my-5 pl-2 text-l font-bold",children:"Filters"}),Object(C.jsxs)("nav",{className:"mx-4 mt-3 mb-10",children:[Object(C.jsxs)("div",{className:"flex-col border-b border-gray-200 mx-1 pb-5 mt-5",children:[Object(C.jsx)("label",{htmlFor:"searchbar",className:"mr-2",children:"Search"}),Object(C.jsx)("input",{type:"text",placeholder:"Enter book name",id:"searchbar",className:"input-alt",onChange:function(e){var t,n;String(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value).length>0?o(String(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)):o("*")}}),Object(C.jsxs)("div",{className:"flex justify-evenly mt-2",children:[Object(C.jsx)("input",{type:"radio",name:"type",id:"title",value:"title",onChange:function(){return Z("title")},defaultChecked:!0}),"Filter by title",Object(C.jsx)("input",{type:"radio",name:"type",id:"author",value:"author",onChange:function(){return Z("authors")}}),"Filter by author"]})]}),Object(C.jsxs)("div",{className:"border-b border-gray-200 mx-1 pl-4 pb-5 mt-5",children:[Object(C.jsx)("span",{className:"font-bold",children:"Categories"}),Object(C.jsxs)("ul",{className:"list-none",children:[Object(C.jsxs)("li",{children:[Object(C.jsx)("input",{type:"radio",name:"cat",value:"*",defaultChecked:!0,onClick:function(){return $("*")}})," All"]}),null===f||void 0===f?void 0:f.map((function(e){return Object(C.jsxs)("li",{children:[Object(C.jsx)("input",{type:"radio",name:"cat",value:e,onClick:function(){return $(e)}})," ".concat(e)]},e)}))]})]}),Object(C.jsxs)("div",{className:"flex flex-col border-b border-gray-200 mx-1 pl-4 pb-5 mt-5 items-center",children:[Object(C.jsx)("span",{className:"font-bold",children:" Ratings "}),Object(C.jsx)("input",{type:"range",min:"0",max:"10",defaultValue:"0",onChange:function(e){var t;a(Number(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value))}}),Object(C.jsx)("span",{className:"ml-2",id:"range",children:n>0?n:"All"})]}),Object(C.jsx)("div",{className:"flex border-b border-gray-200 mx-1 pl-4 pb-5 mt-5 place-content-center",children:Object(C.jsx)("button",{className:"btn-page w-2/3",type:"button",onClick:function(){return v.replace("/books-list/".concat(i,"/").concat(n))},children:"Filter"})})]})]})}),Object(C.jsx)("div",{className:"inline z-40 ".concat(b?"fixed":"hidden"),children:Object(C.jsx)("button",{type:"button",className:"btn-sidebar lg:hidden",onClick:function(){j(!b)},children:"\u2b9e"})})]})},ae=function(){return Object(C.jsx)("div",{className:"flex justify-center italic",children:"No results"})},re=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(R.i)();return Object(r.useEffect)((function(){var e;(null===s||void 0===s||null===(e=s.q)||void 0===e?void 0:e.length)<1&&(s.q="*"),function(){var e=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("title"!==ee()){e.next=8;break}return e.t0=a,e.next=4,W(s.q,s.rating,te());case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 8:if("authors"!==ee()){e.next=14;break}return e.t2=a,e.next=12,X(s.q,s.rating,te());case 12:e.t3=e.sent,(0,e.t2)(e.t3);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[s]),Object(C.jsx)(T.a.div,{exit:nt,children:Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{className:"content-container",children:[Object(C.jsx)(ne,{}),Object(C.jsxs)("div",{className:"w-full shadow-inner",children:[n&&(null===n||void 0===n?void 0:n.map((function(e){return Object(C.jsx)(H,{book:e},e.id)}))),n&&(null===n||void 0===n?void 0:n.length)<1&&Object(C.jsx)(ae,{})]})]}),Object(C.jsx)("div",{className:"flex flex-row w-full justify-center text-xl"})]})})},se=n(36),ce=function(e){var t=e.title,n=e.okButtonLabel,a=e.onVisibilityChange,r=e.onOkButtonClick,s=e.children;return Object(C.jsx)(T.a.div,{className:"fixed left-0 top-0 pin z-50 overflow-auto bg-gray-400 bg-opacity-50 flex h-screen w-screen dark:bg-black dark:bg-opacity-70",initial:"init",animate:"ani",children:Object(C.jsxs)(T.a.div,{className:"relative p-8 bg-white w-full max-w-md m-auto flex-col flex rounded-md shadow-xl dark:bg-gray-700",variants:{init:{opacity:0,y:-100},ani:{opacity:1,y:0}},children:[Object(C.jsxs)("div",{className:"flex justify-between",children:[Object(C.jsx)("h1",{className:"font-bold",children:t}),Object(C.jsx)("button",{type:"button",onClick:function(){return a()},className:"btn-exit",children:"X"})]}),Object(C.jsx)("div",{children:s}),Object(C.jsx)("button",{type:"submit",className:"btn-page mt-3",onClick:function(){return r()},children:n})]})})},ie=function(){var e=E(),t=Object(r.useState)(!1),n=Object(u.a)(t,2),a=n[0],s=n[1],c=Object(se.a)({initialValues:{emailAdress:"",password:""},onSubmit:function(){var t=Object(j.a)(b.a.mark((function t(n){var r,c,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.auth.signIn({email:n.emailAdress,password:n.password});case 2:if(r=t.sent,c=r.user,!(i=r.error)){t.next=8;break}return N("Failed to log-in. Error: ".concat(i.message),"login-error"),t.abrupt("return");case 8:c&&e&&(A(null===c||void 0===c?void 0:c.id).then(function(){var t=Object(j.a)(b.a.mark((function t(n){var a,r,s,c,i,o,l,u;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u=null===n||void 0===n?void 0:n[0],e({createdAt:null!==(a=null===u||void 0===u?void 0:u.createdAt)&&void 0!==a?a:"",email:null!==(r=null===u||void 0===u?void 0:u.email)&&void 0!==r?r:"",firstName:null!==(s=null===u||void 0===u?void 0:u.firstName)&&void 0!==s?s:"",id:null!==(c=null===u||void 0===u?void 0:u.id)&&void 0!==c?c:"",status:null!==(i=null===u||void 0===u?void 0:u.status)&&void 0!==i?i:"",isAdmin:null!==(o=null===u||void 0===u?void 0:u.isAdmin)&&void 0!==o&&o,lastName:null!==(l=null===u||void 0===u?void 0:u.lastName)&&void 0!==l?l:""});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),s(!a),y("Login successful","login-success"));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),i=function(){var e=Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("profiles").select("email").eq("status","ACTIVE").eq("email",c.values.emailAdress);case 2:t=e.sent,(null===(n=t.data)||void 0===n?void 0:n.length)||w("There's no user associated with this email","login-no-email");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)("div",{className:"dark:text-white",children:[Object(C.jsx)("div",{className:"btn-nav text-left relative",children:Object(C.jsx)("button",{type:"button",onClick:function(){return s(!a)},children:"Sign In"})}),a&&Object(C.jsx)(ce,{title:"Login",okButtonLabel:"Sign In",onOkButtonClick:function(){return c.submitForm()},onVisibilityChange:function(){return s(!a)},children:Object(C.jsx)("form",{onSubmit:c.handleSubmit,children:Object(C.jsxs)("div",{className:"flex content-between",children:[Object(C.jsxs)("div",{className:"mr-1 flex-auto",children:[Object(C.jsx)("label",{htmlFor:"email-adress",className:"text-xs block",children:"Email adress:"}),Object(C.jsx)("input",{id:"emailAdress",name:"emailAdress",type:"email",placeholder:"Email-adress",onChange:c.handleChange,onBlur:i,value:c.values.emailAdress,className:"input-pri"})]}),Object(C.jsx)("div",{className:"flex flex-auto flex-col items-end",children:Object(C.jsxs)("div",{children:[Object(C.jsx)("label",{htmlFor:"password",className:"text-xs block",children:"Password:"}),Object(C.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Password",onChange:c.handleChange,value:c.values.password,className:"input-pri"})]})})]})})})]})},oe=function(e){var t=e.title,n=e.items,a=e.logOut,s=Object(r.useState)(!1),c=Object(u.a)(s,2),i=c[0],o=c[1];return Object(C.jsxs)("div",{className:"relative btn-nav-end cursor-default",children:[Object(C.jsx)("button",{type:"button",className:"navbar-nav text-left relative",onClick:function(){return o(!i)},children:t}),i&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"hidden md:flex md:fixed left-0 top-0 pin z-40 overflow-auto bg-white bg-opacity-0 h-screen w-screen",onClick:function(){return o(!i)},children:"\xa0"}),Object(C.jsxs)("div",{className:"dropdown block md:absolute top-0 left-0 w-auto overflow-hidden md:-translate-y-0 z-50 bg-gray-700 md:bg-gray-600 text-white border-none md:border border-gray-400 md:border-gray-800 rounded-sm",children:[n.map((function(e){return Object(C.jsx)("div",{className:"menu-item border-b border-gray-400 md:border-gray-700",children:Object(C.jsx)("button",{type:"button",children:Object(C.jsx)(l.b,{to:"".concat(e.link),className:"cursor-pointer transition duration-400 ease-in-out hover:text-indigo-500",children:e.label})})},e.label)})),Object(C.jsx)("div",{className:"menu-item",children:Object(C.jsx)("button",{type:"button",onClick:a,className:"cursor-pointer transition duration-400 ease-in-out hover:text-indigo-500",children:"Logout"})})]})]})]})},le=function(e){var t=e.onSuccess,n=e.onVisibilityChange,a=Object(se.a)({initialValues:{emailAdress:"",password:"",firstName:"",lastName:""},onSubmit:function(){var e=Object(j.a)(b.a.mark((function e(a){var r,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.auth.signUp({email:a.emailAdress,password:a.password});case 2:if(r=e.sent,s=r.user,c=r.error,a.firstName&&a.lastName){e.next=8;break}return N("First Name and Last name are required fields","register-supabase-error"),e.abrupt("return");case 8:if(!c){e.next=11;break}return N(c.message,"register-supabase-error"),e.abrupt("return");case 11:if(!s){e.next=15;break}return e.next=14,h.from("profiles").insert({id:s.id,firstName:a.firstName,lastName:a.lastName,status:"ACTIVE",email:a.emailAdress}).then((function(e){201===e.status?(y("Registered successfully!","register-success"),t()):w(e.statusText,"register-warning")}));case 14:n();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r=function(){var e=Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("profiles").select("email").eq("email",a.values.emailAdress);case 2:t=e.sent,(null===(n=t.data)||void 0===n?void 0:n.length)&&w("A user with this email address has already been registered","register-email-used");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsx)(ce,{title:"Register",okButtonLabel:"Sign Up",onOkButtonClick:function(){return a.submitForm()},onVisibilityChange:function(){return n()},children:Object(C.jsxs)("form",{onSubmit:a.handleSubmit,children:[Object(C.jsxs)("div",{className:"flex justify-between",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("label",{htmlFor:"firstName",className:"text-xs block",children:"First Name:"}),Object(C.jsx)("input",{id:"firstName",name:"firstName",type:"text",placeholder:"First Name",onChange:a.handleChange,value:a.values.firstName,className:"input-pri"})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("label",{htmlFor:"lastName",className:"text-xs block",children:"Last Name:"}),Object(C.jsx)("input",{id:"lastName",name:"lastName",type:"text",placeholder:"Last Name",onChange:a.handleChange,value:a.values.lastName,className:"input-pri"})]})]}),Object(C.jsxs)("div",{className:"flex justify-between",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("label",{htmlFor:"email-adress",className:"text-xs block",children:"Email adress:"}),Object(C.jsx)("input",{id:"emailAdress",name:"emailAdress",type:"email",placeholder:"Email-adress",onChange:a.handleChange,onBlur:r,value:a.values.emailAdress,className:"input-pri"})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("label",{htmlFor:"password",className:"text-xs block",children:"Password:"}),Object(C.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Password",onChange:a.handleChange,value:a.values.password,className:"input-pri"})]})]})]})})},ue=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(C.jsxs)("div",{className:"dark:text-white",children:[Object(C.jsx)("div",{className:"btn-nav-end text-left relative",children:Object(C.jsx)("button",{type:"button",onClick:function(){return a(!n)},children:"Sign Up"})}),n&&Object(C.jsx)(le,{onSuccess:function(){},onVisibilityChange:function(){return a(!n)}})]})},de=s.a.createContext({isDarkMode:!1,setIsDarkMode:function(){return null}}),be=function(e){var t=e.children,n=Object(r.useState)(!1),a=Object(u.a)(n,2),s=a[0],c=a[1];Object(r.useEffect)((function(){var e=window.document.documentElement.classList.contains("dark");c(e)}),[]);var i=Object(r.useMemo)((function(){return{isDarkMode:s,setIsDarkMode:function(e){var t=window.document.documentElement;localStorage.setItem("color-mode",e?"1":"0"),t.classList.toggle("dark",e),c(e)}}}),[s,c]);return Object(C.jsx)(de.Provider,{value:i,children:t})},je=function(){var e=Object(r.useContext)(de),t=e.isDarkMode,n=e.setIsDarkMode;return Object(C.jsxs)("div",{children:[Object(C.jsx)("input",{type:"checkbox",name:"darkModeSwitch",id:"darkModeSwitch",checked:t,onChange:function(e){return n(e.target.checked)}}),Object(C.jsx)("label",{htmlFor:"darkModeSwitch",children:"Dark Mode"})]})},xe=function(){var e=L(),t=E(),n=Object(r.useState)(!1),a=Object(u.a)(n,2),s=a[0],c=a[1],i=Object(R.g)(),o=Object(r.useState)([{link:"/user",label:"User Profile"},{link:"/user/books",label:"User Books"}]),d=Object(u.a)(o,2),b=d[0],j=d[1];Object(r.useEffect)((function(){B(e)?j([{link:"/user",label:"My Profile"},{link:"/admin/owned",label:"Owned"},{link:"/admin/store",label:"Store"},{link:"/admin/borrowed",label:"Borrowed"}]):j([{link:"/user",label:"My Profile"}])}),[e]);return Object(C.jsx)("nav",{className:"bg-gray-700 shadow",children:Object(C.jsxs)("div",{className:"container px-6 py-3 mx-auto md:flex md:justify-between md:items-center",children:[Object(C.jsxs)("div",{className:"flex items-center justify-between",children:[Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsx)(l.b,{to:"/",children:Object(C.jsx)("span",{className:"text-xl font-bold text-white md:text-2xl mr-3",children:"Books"})}),Object(C.jsx)(je,{})]}),Object(C.jsx)("button",{type:"button",className:"border-gray-400 text-gray-200 rounded-md border max-h-full px-1 transition duration-500 ease-in-out hover:bg-gray-200 hover:text-gray-700 md:hidden",onClick:function(){return c(!s)},children:"\u2630"})]}),Object(C.jsx)("div",{className:s?"block items-center md:flex":"hidden md:block items-center",children:Object(C.jsxs)("div",{className:"flex flex-col md:flex-row my-2 md:my-0 md:mx-6",children:[Object(C.jsx)("button",{type:"button",className:"btn-nav text-left relative",children:Object(C.jsx)(l.b,{to:"/",children:"Home"})}),Object(C.jsx)("button",{type:"button",className:"btn-nav text-left relative",children:Object(C.jsx)(l.b,{to:"/books-list",children:"Book List"})}),q()&&Object(C.jsx)("button",{type:"button",className:"btn-nav text-left relative",children:Object(C.jsx)(l.b,{to:"/user/books",children:"My Books"})}),q()?Object(C.jsx)(oe,{title:null===e||void 0===e?void 0:e.email,items:b,logOut:function(){t&&t({createdAt:"",email:"",firstName:"",id:"",status:"",isAdmin:!1,lastName:""}),v.auth.signOut(),i.push("/"),y("Logged out successfully","logout-success")}}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(ie,{}),Object(C.jsx)(ue,{})]})]})})]})})},me=function(e){for(var t=e.items,n=[],a=0;a<t.length;a++)n.push(Object(C.jsxs)("div",{className:"flex flex-wrap flex-col md:flex-row justify-between border-b",children:[Object(C.jsx)("div",{className:"max-w-1/2 md:text-right p-2 mr-10 text-gray-500 dark:text-gray-300",children:t[a].key}),Object(C.jsx)("div",{className:"max-w-1/2 p-2",children:t[a].value})]},a));return Object(C.jsx)("div",{className:"w-full",children:n})},fe=function(e){for(var t=e.tabs,n=e.defaultTab,a=Object(r.useState)(n),s=Object(u.a)(a,2),c=s[0],i=s[1],o=[],l=function(e){o.push(Object(C.jsx)("button",{type:"button",className:"".concat(t.length>1?"cursor-pointer":"cursor-default"," flex-initial p-4 auto-rows-min border-r border-gray-300\n        dark:bg-gray-600 dark:text-gray-200"),onClick:function(){i(e)},children:t[e].title},e))},d=0;d<t.length;d++)l(d);return Object(C.jsxs)("div",{className:"grid grid-rows-2 grid-cols-1 shadow-md border border-gray-400",style:{gridTemplateRows:"min-content auto"},children:[Object(C.jsx)("div",{className:"flex border-b border-gray-300 dark:bg-gray-600",children:o}),Object(C.jsx)("div",{className:"p-1 md:p-4 dark:bg-gray-600",children:t[c].content})]})},he=function(e){var t,n,a,s,c=e.book,i=Object(r.useState)([{key:"Published date",value:c.publishedDate},{key:"ID",value:c.id},{key:"Title",value:c.title},{key:"ISBN",value:c.isbn},{key:"Authors",value:null===(t=c.authors)||void 0===t?void 0:t.join(", ")},{key:"Categories",value:null===(n=c.categories)||void 0===n?void 0:n.join(", ")}]),o=Object(u.a)(i,1)[0],l=Object(r.useState)([{title:"Details",content:Object(C.jsx)("div",{className:"flex justify-center p-1 md:p-4 dark:bg-gray-600 dark:text-gray-200",children:Object(C.jsx)(me,{items:o})})}]),d=Object(u.a)(l,1)[0];Object(r.useEffect)((function(){window.scrollTo(0,0)}),[]);var x=Object(r.useState)(!1),m=Object(u.a)(x,2),f=m[0],h=m[1],p=L(),g=Object(r.useState)(!1),w=Object(u.a)(g,2),k=w[0],y=w[1],N=Object(r.useCallback)(Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.auth.user()){e.next=9;break}return e.next=3,v.from("borrowedBooks").select("id").match({bookId:c.id,profileId:null===p||void 0===p?void 0:p.id});case 3:if(t=e.sent,!(null===(n=t.data)||void 0===n?void 0:n.length)){e.next=8;break}return y(!0),e.abrupt("return");case 8:y(!1);case 9:case"end":return e.stop()}}),e)}))),[c,p]);return Object(r.useEffect)((function(){N()}),[N]),Object(C.jsxs)("div",{className:"w-11/12 m-auto mt-8",children:[Object(C.jsxs)("div",{className:"md:w-11/12 m-auto flex flex-wrap flex-col md:flex-row items-start",children:[Object(C.jsx)("div",{className:"m-auto flex flex-wrap flex-col items-start md:flex-row md:w-2/6",children:Object(C.jsx)("img",{onClick:function(){return h(!0)},src:c.imageLinks[0],alt:"A book.",className:"m-auto md:w-1/3 max-h-56 object-scale-down transform hover:scale-110 cursor-pointer w-32 pr-2 transition duration-400 ease-in-out hover:-translate-y-1"})}),Object(C.jsxs)("div",{className:"lg:w-2/3 flex-col lg:flex-row flex flex-wrap",children:[Object(C.jsxs)("div",{className:"lg:w-6/12 flex flex-auto flex-col",children:[Object(C.jsx)("span",{className:"text-xl dark:text-gray-300",children:c.title})," ",Object(C.jsx)("br",{}),Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsx)("div",{className:"w-1/2 text-gray-600 dark:text-gray-300",children:null===(a=c.categories)||void 0===a?void 0:a.join(", ")}),Object(C.jsx)("div",{className:"w-1/2 text-right text-gray-600 dark:text-gray-300",children:null===(s=c.authors)||void 0===s?void 0:s.join(", ")})]}),Object(C.jsx)("div",{className:"mt-12 text-sm text-gray-700 text-justify dark:text-gray-300",children:c.description})]}),Object(C.jsxs)("div",{className:"lg:w-2/12 mt-4 lg:ml-4",children:[Object(C.jsx)(J,{bare:!1,votesAmount:c.votesAmount,avgRating:c.avgRating}),0!==c.quantity&&!k&&Object(C.jsx)(Q,{bookId:c.id,profileId:null===p||void 0===p?void 0:p.id,date:new Date,returnDate:new Date((new Date).setMonth((new Date).getMonth()+1)),quantity:c.quantity?c.quantity-1:-1,onBookBorrow:N}),k&&0!==c.quantity&&Object(C.jsx)("span",{className:"dark:text-gray-200",children:"You have already borrowed this book"}),0===c.quantity&&Object(C.jsx)("span",{className:"dark:text-gray-200",children:"Not in stock right now"})]})]})]}),Object(C.jsx)("div",{className:"w-full md:w-2/3 mt-8 m-auto",children:Object(C.jsx)(fe,{tabs:d,defaultTab:0})}),f&&Object(C.jsx)("div",{className:"fixed left-0 top-0 pin z-50 overflow-auto bg-gray-400 bg-opacity-50 flex h-screen w-screen dark:bg-black dark:bg-opacity-70",onClick:function(){return h(!1)},children:Object(C.jsx)("div",{className:"relative m-auto flex-col flex rounded-md shadow-xl transform scale-150",children:Object(C.jsx)("img",{src:O(c),alt:"A book."})})})]})},ve=function(){var e=Object(R.i)(),t=Object(r.useState)(),n=Object(u.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){(function(){var t=Object(j.a)(b.a.mark((function t(){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.from("books").select("*").eq("id",e.id);case 2:n=t.sent,null!==(a=n.data)&&s(a[0]);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(C.jsx)(T.a.div,{exit:nt,children:a?Object(C.jsxs)("div",{className:"content-container bg-white dark:bg-gray-800",children:[Object(C.jsx)(ne,{}),Object(C.jsx)("div",{className:"mt-16 w-full",children:Object(C.jsx)(he,{book:a})})]}):Object(C.jsx)("span",{children:"Book doesn't exist"})})},pe=n(77),ge=n.n(pe),Oe=function(e){var t=e.count,n=e.currentPage,a=e.pageSize,r=e.onPageChange,s=Math.ceil(t/a);return Object(C.jsx)(ge.a,{previousLabel:Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("span",{"aria-hidden":"true",children:"\u2b9c"})}),nextLabel:Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("span",{"aria-hidden":"true",children:"\u2b9e"})}),previousClassName:"rounded-sm bg-gray-200 text-gray-400 border border-gray-300 border-opacity-50 cursor-pointer transition duration-300 ease-in-out hover:text-indigo-500 hover:bg-gray-50 dark:bg-gray-500 dark:hover:text-black",previousLinkClassName:"w-full px-3",nextClassName:"rounded-sm bg-gray-200 text-gray-400 border border-gray-300 border-opacity-50 cursor-pointer transition duration-300 ease-in-out hover:text-indigo-500 hover:bg-gray-50 dark:bg-gray-500 dark:hover:text-black",nextLinkClassName:"w-full px-3",containerClassName:"flex flex-row",pageClassName:"px-2 transition duration-300 ease-in-out hover:text-indigo-500 cursor-pointer dark:text-white dark:hover:text-black",activeLinkClassName:"text-indigo-500 dark:text-black",disabledClassName:"rounded-sm bg-gray-200 text-gray-400 border border-gray-300 border-opacity-50 opacity-25 disabled:hover:text-gray-500 hover:bg-gray-200",pageRangeDisplayed:5,marginPagesDisplayed:1,pageCount:s,forcePage:n,onPageChange:r})},we=function(e){var t=e.id,n=e.onBookDelete,a=e.title,s=Object(r.useState)(!1),c=Object(u.a)(s,2),i=c[0],o=c[1],l=function(){var e=Object(j.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("books").delete().match({id:t});case 2:a=e.sent,a.error&&N("There was a problem with deleting this book!","delete-book-error"),n();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)("div",{children:[Object(C.jsx)("button",{type:"button",className:"btn-page",onClick:function(){return o(!0)},children:"- Delete book"}),i&&Object(C.jsx)("div",{className:"fixed left-0 top-0 pin z-50 overflow-auto bg-gray-400 bg-opacity-50 flex h-screen w-screen dark:bg-black dark:bg-opacity-70",onClick:function(){return o(!1)},children:Object(C.jsxs)("div",{className:"relative p-8 bg-white w-full max-w-md m-auto flex-col flex rounded-md shadow-xl dark:bg-gray-600 dark:text-white",children:[Object(C.jsxs)("p",{children:['Are you sure you want to delete this book from the stock: "',a,'"?']}),Object(C.jsx)("button",{type:"button",className:"btn-page",onClick:l,children:"- Delete book from stock"})]})})]})},ke=function(e){var t=e.id,n=e.title,a=e.authors,s=e.image,c=e.categories,i=e.quantity,o=e.onBookDelete,l=Object(r.useState)(0),d=Object(u.a)(l,2),x=d[0],m=d[1];return Object(r.useEffect)((function(){(function(){var e=Object(j.a)(b.a.mark((function e(){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.from("borrowedBooks").select("*").eq("bookId",t);case 2:n=e.sent,null!==(a=n.data)&&m(a.length);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(C.jsxs)("div",{className:"flex flex-col place-content-center max-w-full bg-gray-100 shadow-md p-3 m-3 mx-6 sm:flex-row md:w-auto dark:bg-gray-600 dark:text-white",children:[Object(C.jsx)("img",{src:s,alt:"A book.",className:"m-3 w-32"}),Object(C.jsxs)("div",{className:"ml-2 w-full flex flex-col",children:[n,Object(C.jsx)("span",{className:"text-gray-400",children:null===a||void 0===a?void 0:a.join(" ")}),Object(C.jsx)("span",{className:"text-gray-400",children:c}),Object(C.jsxs)("span",{className:"text-gray-400",children:["Quantity of books in stock: ",i]}),Object(C.jsxs)("span",{className:"text-gray-400",children:["Quantity of borrowed books: ",x]})]}),Object(C.jsx)("div",{children:Object(C.jsx)(we,{id:t,title:n,onBookDelete:o})})]})},ye=function(){var e=Object(r.useState)(10),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(0),c=Object(u.a)(s,2),i=c[0],o=c[1],l=Object(r.useState)(9),d=Object(u.a)(l,2),x=d[0],m=d[1],f=Object(r.useState)([]),h=Object(u.a)(f,2),p=h[0],g=h[1],O=Object(r.useCallback)(Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.from("books").select("*").range(i,x);case 2:t=e.sent,null!==(n=t.data)&&g(n);case 5:case"end":return e.stop()}}),e)}))),[x,i]),w=Object(r.useCallback)(Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.from("books").select("id",{count:"exact"});case 2:t=e.sent,n=t.count,a(n);case 5:case"end":return e.stop()}}),e)}))),[]);return Object(r.useEffect)((function(){w(),O()}),[O,w]),Object(C.jsxs)(T.a.div,{exit:nt,children:[Object(C.jsx)("div",{className:"container w-full h-full max-w-8xl mx-auto flex",children:Object(C.jsx)("div",{className:"min-w-0 w-full pt-3 flex-auto lg:static lg:max-h-full lg:overflow-visible shadow-inner",children:p&&(null===p||void 0===p?void 0:p.map((function(e){return Object(C.jsx)(ke,{id:e.id,title:e.title,image:e.imageLinks[0],isbn:e.isbn,authors:e.authors,publishedDate:e.publishedDate,categories:e.categories,description:e.description,quantity:e.quantity,onBookDelete:O},e.id)})))})}),Object(C.jsx)("div",{className:"flex flex-row w-full justify-center mb-2 text-xl",children:Object(C.jsx)(Oe,{count:n||10,pageSize:10,currentPage:i/10,onPageChange:function(e){o(10*e.selected),m(10*e.selected+9)}})})]})},Ne=n(78),Ce=n.n(Ne),Se=function(e){var t=e.id,n=e.quantity,a=e.onQuantityUpdate,r=function(){var e=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("books").update({quantity:n}).match({id:t});case 2:a(null!==n&&void 0!==n?n:0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{children:Object(C.jsx)("button",{type:"button",className:"btn-page",onClick:r,children:"+ Add books to the stock"})})},De=function(e){var t=e.id,n=e.title,a=e.authors,s=e.image,c=e.description,i=e.isbn,o=e.publishedDate,l=e.categories,d=e.quantity,x=e.onQuantityUpdate,m=L(),f=Object(r.useState)(),v=Object(u.a)(f,2),p=v[0],g=v[1],O=function(){var e=Object(j.a)(b.a.mark((function e(){var r,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("books").insert({id:t,title:n,description:c,publishedDate:o,categories:l,isbn:i,imageLinks:[s],authors:a,votesAmount:Math.floor(1e3*Math.random())+1,avgRating:Math.floor(10*Math.random())+1,addedById:null===m||void 0===m?void 0:m.id,addedDate:new Date,quantity:d});case 2:r=e.sent,u=r.error,x(),g(u);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)("div",{children:[Object(C.jsx)("button",{type:"button",className:"btn-page",onClick:O,children:"+ Add books to the stock"}),p&&N(p.message,"adding-book-error")]})},Ie=function(e){var t=e.id,n=e.title,a=e.authors,s=e.image,c=e.publishedDate,i=e.categories,o=e.description,l=e.isbn,d=Object(r.useState)("1"),x=Object(u.a)(d,2),m=x[0],f=x[1],h=Object(r.useState)(null),p=Object(u.a)(h,2),g=p[0],O=p[1],k=Object(r.useState)([]),y=Object(u.a)(k,2),N=y[0],S=y[1],D=Object(r.useCallback)(Object(j.a)(b.a.mark((function e(){var n,a,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.from("books").select("\n    id, quantity\n  ").eq("id",t);case 2:n=e.sent,null!==(a=n.data)&&(S(a),O(null!==(r=null===(s=a[0])||void 0===s?void 0:s.quantity)&&void 0!==r?r:0));case 5:case"end":return e.stop()}}),e)}))),[t]);Object(r.useEffect)((function(){D()}),[D]);return Object(C.jsxs)("div",{className:"flex flex-col place-content-center max-w-full bg-gray-100 shadow-md p-3 m-3 mx-6 sm:flex-row md:w-auto dark:bg-gray-600 dark:text-white",children:[Object(C.jsx)("img",{src:s,alt:"A book.",className:"transform m-3 w-32"}),Object(C.jsxs)("div",{className:"ml-2 w-full flex flex-col",children:[n,Object(C.jsx)("span",{className:"text-gray-400",children:null===a||void 0===a?void 0:a.join(" ")}),Object(C.jsx)("span",{className:"text-gray-400",children:i})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{children:"Quantity:"}),Object(C.jsx)("input",{id:"quantity",name:"quantity",type:"number",onChange:function(e){return(t=e.target.value).includes("-")?w("You have tried to add negative value!","negative-value-warning"):t.includes(",")||t.includes(".")?w("You have tried to add float value!","float-value-warning"):isNaN(Number(t))?w("You have tried to add NaN value","NaN-value-warning"):f(t);var t}}),0!==(null===N||void 0===N?void 0:N.length)&&Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{className:"bg-gray-400 text-white dark:bg-gray-500",children:["In a stock: ",g," "]}),Object(C.jsx)(Se,{id:t,quantity:Number(m)+(null!==g&&void 0!==g?g:0),onQuantityUpdate:function(e){return O(e)}})]}),0===(null===N||void 0===N?void 0:N.length)&&Object(C.jsx)(De,{id:t,title:n,authors:a,image:s,description:o,isbn:l,publishedDate:c,categories:i,quantity:Number(m),onQuantityUpdate:D})]})]})},Ae=function(){var e=Object(r.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)("book"),c=Object(u.a)(s,2),i=c[0],o=c[1],l=Object(r.useState)(0),d=Object(u.a)(l,2),x=d[0],m=d[1],f=Object(se.a)({initialValues:{filter:""},onSubmit:function(e){o(e.filter?e.filter:"book")}});Object(r.useEffect)((function(){(function(){var e=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ce.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(i,"&startIndex=").concat(x));case 3:t=e.sent,a(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N("There was a problem with fetching data!","API-error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[i,x]);return Object(C.jsx)(T.a.div,{exit:nt,children:Object(C.jsxs)("div",{className:"container mx-auto shadow-inner",children:[Object(C.jsx)("form",{onSubmit:f.handleSubmit,children:Object(C.jsx)("input",{id:"filter",name:"filter",type:"text",placeholder:"Search",onChange:f.handleChange,className:"input-pri mt-3 mx-6"})}),Object(C.jsx)("div",{children:n&&(null===n||void 0===n?void 0:n.items.map((function(e){var t,n,a,r,s,c;return Object(C.jsx)(Ie,{id:null!==(n=e.id)&&void 0!==n?n:"N/D",title:null!==(a=e.volumeInfo.title)&&void 0!==a?a:"N/D",description:null!==(r=e.volumeInfo.description)&&void 0!==r?r:"N/D",publishedDate:null!==(s=e.volumeInfo.publishedDate)&&void 0!==s?s:"N/D",image:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"".concat("/internships-2021","/image-not-found.png"),authors:e.volumeInfo.authors,categories:null!==(c=e.volumeInfo.categories)&&void 0!==c?c:["N/D"],isbn:e.volumeInfo.industryIdentifiers?e.volumeInfo.industryIdentifiers[0].identifier:"N/D"},null!==(t=e.id)&&void 0!==t?t:"N/D")})))}),Object(C.jsx)("div",{className:"flex flex-row w-full justify-center mb-2 text-xl",children:Object(C.jsx)(Oe,{count:(null===n||void 0===n?void 0:n.totalItems)?n.totalItems:10,pageSize:10,currentPage:x/10,onPageChange:function(e){m(10*e.selected)}})})]})})},Be=function(e){var t,n,a,r,s,c,i=e.book,o=e.profile,l=e.returnDate,u=e.date;return Object(C.jsxs)("div",{className:"flex flex-col place-content-center max-w-full bg-gray-50 shadow p-3 m-3 mx-6 sm:flex-row md:w-auto dark:bg-gray-600 dark:text-white",children:[Object(C.jsx)("div",{className:"m-3 flex justify-center flex-wrap flex-col",children:Object(C.jsx)("div",{children:Object(C.jsx)("img",{src:O(i),alt:"".concat(null!==(t=i.title)&&void 0!==t?t:"N/D"," cover."),className:"w-32"})})}),Object(C.jsxs)("div",{className:"ml-2 mb-4 md:mb-0 w-full",children:[null!==(n=i.title)&&void 0!==n?n:"N/D",Object(C.jsxs)("div",{className:"text-gray-400 flex flex-col",children:[Object(C.jsx)("span",{children:null!==(a=null===(r=i.authors)||void 0===r?void 0:r.join(" "))&&void 0!==a?a:"N/D"}),Object(C.jsx)("span",{children:null!==(s=i.categories)&&void 0!==s?s:"N/D"}),Object(C.jsx)("div",{className:"overflow-hidden max-h-20 book-desc",children:null!==(c=i.description)&&void 0!==c?c:"N/D"}),Object(C.jsx)("div",{className:"flex h-4 mt-2",children:Object(C.jsx)(J,{votesAmount:i.votesAmount,avgRating:i.avgRating,bare:!0})})]}),Object(C.jsxs)("p",{className:"text-right",children:["Date: ",u]}),Object(C.jsxs)("p",{className:"text-right",children:["Return date: ",l]}),Object(C.jsxs)("p",{className:"text-right",children:["User: ","".concat(o.firstName," ").concat(o.lastName)]})]})]})},qe=function(){var e=Object(r.useState)(10),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(0),c=Object(u.a)(s,2),i=c[0],o=c[1],l=Object(r.useState)(9),d=Object(u.a)(l,2),x=d[0],m=d[1],f=Object(r.useState)([]),h=Object(u.a)(f,2),p=h[0],g=h[1],O=Object(r.useCallback)(Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.from("borrowedBooks").select("id, date, returnDate, book:books(*), profile:profiles(*)").range(i,x);case 2:t=e.sent,null!==(n=t.data)&&g(n);case 5:case"end":return e.stop()}}),e)}))),[i,x]),w=Object(r.useCallback)(Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.from("borrowedBooks").select("id",{count:"exact"});case 2:t=e.sent,n=t.count,a(n);case 5:case"end":return e.stop()}}),e)}))),[]);return Object(r.useEffect)((function(){w(),O()}),[O,w]),Object(C.jsxs)(T.a.div,{exit:nt,children:[Object(C.jsxs)("div",{className:"container mx-auto py-1 shadow-inner",children:[p&&(null===p||void 0===p?void 0:p.map((function(e){return Object(C.jsx)(Be,{book:e.book,returnDate:e.returnDate,date:e.date,profile:e.profile},e.id)}))),p&&(null===p||void 0===p?void 0:p.length)<1&&Object(C.jsx)(ae,{})]}),Object(C.jsx)("div",{className:"flex flex-row w-full justify-center mb-2 text-xl",children:Object(C.jsx)(Oe,{count:n||10,pageSize:10,currentPage:i/10,onPageChange:function(e){o(10*e.selected),m(10*e.selected+9)}})})]})},Le=function(e){var t=e.id,n=e.bookId,a=e.quantity,s=e.onBookReturn,c=e.title,i=Object(r.useState)(!1),o=Object(u.a)(i,2),l=o[0],d=o[1],x=function(){var e=Object(j.a)(b.a.mark((function e(){var r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.from("borrowedBooks").delete().match({id:t});case 2:return r=e.sent,c=r.error,e.next=6,h.from("books").update({quantity:a}).match({id:n});case 6:c&&N("There was a problem with returning this book!","return-book-error"),s();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)("div",{children:[Object(C.jsx)("button",{type:"button",className:"btn-page mt-2",onClick:function(){return d(!0)},children:"- Return Book"}),l&&Object(C.jsx)("div",{className:"fixed left-0 top-0 pin z-50 overflow-auto bg-gray-400 bg-opacity-50 flex h-screen w-screen dark:bg-black dark:bg-opacity-70",onClick:function(){return d(!1)},children:Object(C.jsxs)("div",{className:"relative p-8 bg-white w-full max-w-md m-auto flex-col flex rounded-md shadow-xl dark:bg-gray-600 dark:text-white",children:[Object(C.jsxs)("p",{children:['Are you sure you want to return this book "',c,'"?']}),Object(C.jsx)("button",{type:"button",className:"btn-page",onClick:x,children:"- Return Book"})]})})]})},Ee=function(e){var t,n,a,r,s,c,i=e.book,o=e.returnDate,l=e.date,u=e.id,d=e.onBookReturn;return Object(C.jsxs)("div",{className:"flex flex-col place-content-center max-w-full bg-gray-50 shadow p-3 m-3 mx-6 md:w-auto sm:flex-row dark:bg-gray-600 dark:text-white",children:[Object(C.jsx)("div",{className:"m-3 flex justify-center flex-wrap flex-col",children:Object(C.jsx)("div",{children:Object(C.jsx)("img",{src:O(i),alt:"".concat(null!==(t=i.title)&&void 0!==t?t:"N/D"," cover."),className:"w-32"})})}),Object(C.jsxs)("div",{className:"ml-2 mb-4 md:mb-0 w-full",children:[null!==(n=i.title)&&void 0!==n?n:"N/D",Object(C.jsxs)("div",{className:"text-gray-400 flex flex-col",children:[Object(C.jsx)("span",{children:null!==(a=null===(r=i.authors)||void 0===r?void 0:r.join(" "))&&void 0!==a?a:"N/D"}),Object(C.jsx)("span",{children:null!==(s=i.categories)&&void 0!==s?s:"N/D"}),Object(C.jsx)("div",{className:"overflow-hidden max-h-20 book-desc",children:null!==(c=i.description)&&void 0!==c?c:"N/D"}),Object(C.jsx)("div",{className:"flex h-4 mt-2",children:Object(C.jsx)(J,{votesAmount:i.votesAmount,avgRating:i.avgRating,bare:!0})})]}),Object(C.jsx)(Le,{id:u,bookId:i.id,quantity:i.quantity+1,onBookReturn:d,title:i.title}),Object(C.jsxs)("p",{className:"text-right",children:["Date: ",l]}),Object(C.jsxs)("p",{className:"text-right",children:["Return date: ",o]})]})]})},Pe=function(){var e=Object(r.useState)(10),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(0),c=Object(u.a)(s,2),i=c[0],o=c[1],l=Object(r.useState)(9),d=Object(u.a)(l,2),x=d[0],m=d[1],f=Object(r.useState)([]),h=Object(u.a)(f,2),p=h[0],g=h[1],O=L(),w=Object(r.useCallback)(Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.from("borrowedBooks").select("id, date, returnDate, book:books(*)").eq("profileId",null===O||void 0===O?void 0:O.id).range(i,x);case 2:t=e.sent,null!==(n=t.data)&&g(n);case 5:case"end":return e.stop()}}),e)}))),[O,x,i]),k=Object(r.useCallback)(Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.from("borrowedBooks").select("id",{count:"exact"}).eq("profileId",null===O||void 0===O?void 0:O.id);case 2:t=e.sent,n=t.count,a(n);case 5:case"end":return e.stop()}}),e)}))),[O]);return Object(r.useEffect)((function(){k(),w()}),[w,k]),Object(C.jsxs)(T.a.div,{exit:nt,children:[Object(C.jsxs)("div",{className:"container mx-auto py-1 shadow-inner",children:[p&&(null===p||void 0===p?void 0:p.map((function(e){return Object(C.jsx)(Ee,{book:e.book,returnDate:e.returnDate,date:e.date,id:e.id,onBookReturn:w},e.book.id)}))),p&&(null===p||void 0===p?void 0:p.length)<1&&Object(C.jsx)(ae,{})]}),Object(C.jsx)("div",{className:"flex flex-row w-full justify-center mb-2 text-xl",children:Object(C.jsx)(Oe,{count:n||10,pageSize:10,currentPage:i/10,onPageChange:function(e){o(10*e.selected),m(10*e.selected+9)}})})]})},Fe=function(e){var t=e.path,n=e.exact,a=e.user,r=e.children;return!a&&q()?Object(C.jsx)("div",{children:"Loading..."}):B(a)?Object(C.jsxs)(R.b,{path:t,exact:n,children:[" ",r," "]}):Object(C.jsx)(R.a,{to:"/"})},Re=function(e){var t=e.path,n=e.exact,a=e.children;return q()?Object(C.jsxs)(R.b,{path:t,exact:n,children:[" ",a," "]}):Object(C.jsx)(R.a,{to:"/"})},Me=function(){var e=Object(R.h)();return Object(C.jsxs)("div",{className:"flex flex-col items-center w-full",children:[Object(C.jsx)("h1",{className:"text-9xl tracking-wider",children:"404"}),Object(C.jsxs)("h3",{className:"text-3xl",children:["No match for path: ",Object(C.jsx)("code",{className:"font-black",children:e.pathname})]})]})},Te=function(e){var t=e.url,n=e.className;return Object(C.jsx)("img",{className:"w-32 h-32 rounded-full object-cover ".concat(n),src:t,alt:"User avatar"})},Ue=n(79),ze=n.n(Ue),Ve=function(e){var t=e.onAvatarChange,n=L(),a=Object(r.useState)(Object(r.useRef)(null)),s=Object(u.a)(a,1)[0],c=Object(r.useState)(""),i=Object(u.a)(c,2),o=i[0],l=i[1];Object(r.useEffect)((function(){Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,P();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[]);var d=function(){var e=Object(j.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,P();case 3:n=e.sent,l(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=3;break}return N("File not found","file-not-found"),e.abrupt("return");case 3:if(n&&n.id){e.next=6;break}return N("Unknown user","unknown-user"),e.abrupt("return");case 6:return e.t0=ze.a,e.next=9,t.arrayBuffer();case 9:return e.t1=e.sent,e.next=12,e.t0.fromBuffer.call(e.t0,e.t1);case 12:if("image/jpeg"===(null===(a=e.sent)||void 0===a?void 0:a.mime)||"image/png"===(null===a||void 0===a?void 0:a.mime)){e.next=16;break}return N("Invalid file type. Supported types: jpg, png.","invalid-file-type"),e.abrupt("return");case 16:return k("Uploading...","uploading"),e.next=19,v.storage.from("images").remove(["avatars/".concat(null===n||void 0===n?void 0:n.id)]);case 19:v.storage.from("images/avatars").upload("".concat(null===n||void 0===n?void 0:n.id),t).then(function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.error){e.next=2;break}throw t.error;case 2:return y("Upload successful","upload-success"),e.t0=l,e.next=6,P();case 6:e.t1=e.sent,(0,e.t0)(e.t1),d();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){N("Upload error (".concat(JSON.stringify(e),")"),"upload-error")}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)("div",{className:"p-4",children:[Object(C.jsx)("h1",{className:"text-2xl",children:"Change avatar"}),Object(C.jsxs)("div",{className:"flex flex-wrap",children:[Object(C.jsx)(Te,{url:o,className:""}),Object(C.jsxs)("div",{className:"flex flex-col flex-wrap place-content-end m-2",children:[Object(C.jsx)("input",{type:"file",accept:"image/jpeg, image/png",onChange:function(){var e,t,n;(null===s||void 0===s||null===(e=s.current)||void 0===e?void 0:e.files)&&(null===s||void 0===s||null===(t=s.current)||void 0===t?void 0:t.files.length)>0?x(null===s||void 0===s||null===(n=s.current)||void 0===n?void 0:n.files[0]):w("File not selected","file-not-selected")},ref:s,required:!0}),Object(C.jsx)("div",{className:"mt-4",children:Object(C.jsx)("button",{type:"button",className:"btn-page",onClick:function(){v.storage.from("images").remove(["avatars/".concat(null===n||void 0===n?void 0:n.id)]).then((function(){d(),k("Avatar has been successfully deleted","delete-avatar-success")})).catch((function(e){N("An error occured when removing avatar: ".concat(JSON.stringify(e)),"delete-avatar-error")}))},children:"Delete current avatar"})})]})]})]})},Je=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],s=function(){var e=Object(j.a)(b.a.mark((function e(){var t,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.from("profiles").update({status:"DELETED"}).match({id:null===(t=v.auth.user())||void 0===t?void 0:t.id});case 2:n=e.sent,(r=n.error)?N(r.message,"delete-account-fail"):(v.auth.signOut(),y("Account deleted successfully","logout-success"),a(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)("div",{className:"flex justify-end",children:[Object(C.jsx)("button",{type:"button",onClick:function(){return a(!n)},className:"text-red-300 border-red-300 rounded-sm border-2 max-h-full p-1 transition duration-300 ease-in-out hover:bg-red-300 hover:text-white",children:"Delete account"}),n&&Object(C.jsx)(ce,{title:"Do you want to delete your account?",okButtonLabel:"Delete",onOkButtonClick:function(){return s()},onVisibilityChange:function(){return a(!n)}})]})},Qe=function(e){var t=e.onAvatarChange;return Object(C.jsxs)("div",{className:"m-4",children:[Object(C.jsx)(Ve,{onAvatarChange:t}),Object(C.jsx)(Je,{})]})},He=(n(141),function(){var e=L(),t=Object(r.useState)(""),n=Object(u.a)(t,2),a=n[0],s=n[1],c={backgroundImage:"url(".concat("/internships-2021","/userpage-background.jpg)")};return Object(r.useEffect)((function(){Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,P();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(C.jsx)(T.a.div,{exit:nt,children:Object(C.jsxs)("div",{className:"container mx-auto",children:[Object(C.jsx)("div",{className:"h-32 bg-gray-500 bg-no-repeat bg-center object-contain",style:c}),Object(C.jsx)("div",{className:"mx-16 bg-white relative -top-4 z-30 dark:bg-gray-600 dark:text-white",children:Object(C.jsxs)("div",{className:"shadow-md",children:[Object(C.jsxs)("div",{className:"flex flex-col md:flex-row",children:[Object(C.jsx)("div",{className:"w-1/4 relative h-24",children:Object(C.jsx)(Te,{url:a,className:"relative -top-16 left-2 shadow"})}),Object(C.jsx)("div",{className:"mt-2 w-1/2",children:Object(C.jsxs)("div",{className:"flex uppercase",children:[Object(C.jsx)("div",{className:"w-min md:mr-2 first-l",children:null===e||void 0===e?void 0:e.firstName}),Object(C.jsx)("div",{className:"w-min first-l",children:null===e||void 0===e?void 0:e.lastName})]})}),Object(C.jsx)("div",{className:"text-gray-400 w-1/4 flex justify-end p-4",children:B(L())?"Administrator":"User"})]}),Object(C.jsx)("div",{className:"p-2",children:Object(C.jsx)(Qe,{onAvatarChange:Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,P();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))})})]})})]})})}),Ye=(n(142),function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(R.g)();return Object(C.jsxs)("section",{className:"grid grid-cols-1 grid-rows-1 w-full home-dots-container h-40 mt-8",children:[Object(C.jsxs)("div",{className:"col-start-2 row-start-1 row-end-3 z-20 flex justify-center",children:[Object(C.jsx)("button",{className:"p-4 px-12 bg-white border border-gray-500",type:"button",onClick:function(){return a(!n)},children:"Join us!"}),n?Object(C.jsx)(le,{onSuccess:function(){s.push("/books-list")},onVisibilityChange:function(){return a(!n)}}):Object(C.jsx)(C.Fragment,{})]}),Object(C.jsx)("div",{className:"col-start-1 row-start-2 row-end-4 col-span-full home-dots-gradient w-full bg-black"})]})}),We=(n(143),function(e){var t=e.title,n=e.content,a=e.rightAligned,r=void 0!==a&&a;return Object(C.jsxs)("div",{className:"flex justify-between m-4 md:m-0 ".concat(r?"md:mr-12 flex-row-reverse":"md:ml-12"),children:[Object(C.jsx)("div",{className:"homepage-textbox w-full lg:w-3/5 ".concat(r?"self-end":"self-start"," \n      bg-white text-2xl shadow-md p-4 justify-self-start"),children:Object(C.jsxs)("div",{className:"h-full flex flex-col",children:[Object(C.jsx)("span",{className:"text-3xl font-bold mb-4",children:t}),Object(C.jsx)("p",{className:"text-justify",children:n})]})}),Object(C.jsx)("img",{src:"".concat("/internships-2021","/bubbles.svg"),alt:"Bubbles",className:"w-1/4 hidden md:block relative select-none\n        ".concat(r?"-left-6 homepage-bubble":"-right-12")})]})}),Xe=function(){var e={backgroundImage:"url(".concat("/internships-2021","/homepage-dotted-line.svg)")};return Object(C.jsxs)("div",{className:"lg:container flex flex-col gap-24 w-full",style:e,children:[Object(C.jsx)(We,{title:"Who are we?",content:"We are a group of enthusiasts who love books! Have you ever had a problem, when you couldn't get your hands on a rare book? Or maybe you just don't feel like going the public library? That's when our site comes into play! Simply by making an account you can get access to tons of great books. Just look if we have what interests you in stock and borrow it!",rightAligned:!1}),Object(C.jsx)(We,{title:"How does it work?",content:"It's simple. You make an account, look for the book of your choice and borrow it! Then you get to keep it for a month, when the time passes you will need to return it.",rightAligned:!0}),Object(C.jsx)(We,{title:"How does it work?",content:"It's simple. You make an account, look for the book of your choice and borrow it! Then you get to keep it for a month, when the time passes you will need to return it.",rightAligned:!1})]})},_e=(n(144),function(){return Object(C.jsx)("section",{className:"landing-container2 h-screen w-screen bg-gray-900",children:Object(C.jsxs)("div",{className:"h-full w-full grid grid-rows-1 grid-cols-1 justify-center",children:[Object(C.jsx)("div",{className:"row-start-1 col-start-1 flex justify-center",children:Object(C.jsx)("img",{className:"object-cover w-full h-full",src:"".concat("/internships-2021","/homepage-landscape-bg.jpg"),alt:"ok"})}),Object(C.jsx)("div",{className:"h-full w-full row-start-1 col-start-1 bg-opacity-60 bg-black",children:Object(C.jsxs)("div",{className:"grid h-full w-full landing-page-container text-white",children:[Object(C.jsxs)("nav",{className:"col-span-full p-4 flex flex-col md:flex-row justify-between",children:[Object(C.jsx)("div",{className:"landing-page-nav-item-container",children:Object(C.jsxs)("span",{children:[Object(C.jsx)("span",{className:"flex flex-row items-center",children:Object(C.jsx)("span",{children:"Home"})}),Object(C.jsx)("hr",{className:"main-underline mt-2"})]})}),Object(C.jsx)("div",{className:"landing-page-nav-item-container",children:Object(C.jsx)(l.b,{to:"/books-list",children:Object(C.jsxs)("span",{children:["Check out the book list!",Object(C.jsx)("hr",{className:"main-underline mt-2 ml-auto"})]})})})]}),Object(C.jsxs)("div",{className:"col-start-2 row-start-2 landing-page-grid-item-container",children:[Object(C.jsx)("hr",{className:"main-underline"}),Object(C.jsx)("span",{className:"text-3xl font-bold",children:'Library "SIEMA"'})]}),Object(C.jsx)("div",{className:"col-start-2 row-start-3 landing-page-grid-item-container",children:Object(C.jsx)("span",{className:"text-3xl font-semibold",children:"Key features"})}),Object(C.jsx)("div",{className:"col-start-2 row-start-4 landing-page-grid-item-container",children:Object(C.jsx)("span",{className:"landing-page-our-features",children:"Quality"})}),Object(C.jsx)("div",{className:"col-start-1 row-start-4 landing-page-grid-item-container",children:Object(C.jsx)("span",{className:"landing-page-our-features",children:"Vast range of books"})}),Object(C.jsx)("div",{className:"col-start-3 row-start-4 landing-page-grid-item-container",children:Object(C.jsx)("span",{className:"landing-page-our-features",children:"Tradition"})})]})})]})})}),Ge=function(e){var t=e.id,n=void 0===t?"":t,a=e.title,r=void 0===a?"":a,s=e.author,c=void 0===s?"":s,i=e.image,o=void 0===i?"":i,u=e.votesAmount,d=void 0===u?0:u,b=e.avgRating,j=void 0===b?0:b;return Object(C.jsxs)(l.b,{to:"/book/".concat(n),className:"flex flex-col justify-center items-center text-center",children:[Object(C.jsx)("div",{className:"gallery-tile",children:Object(C.jsx)("img",{src:o,alt:r,className:"gallery-img"})}),Object(C.jsxs)("div",{className:"flex flex-col items-center h-auto",children:[r.length>25?"".concat(r.substr(0,25).trim(),"..."):r,Object(C.jsx)("br",{}),c.length>0?Object(C.jsx)("span",{className:"text-gray-500 text-sm",children:c.length>20?"".concat(c.substr(0,20).trim(),"...\n"):"".concat(c,"\n")}):Object(C.jsx)("span",{className:"text-gray-500 text-sm",children:"No author"}),Object(C.jsx)("div",{className:"w-32 h-16",children:Object(C.jsx)(J,{bare:!0,votesAmount:d,avgRating:j})})]})]})},Ke=function(e){var t,n,a,s,c,i,o,l=e.entryCount,d=e.entries,b=Object(r.useState)(0),j=Object(u.a)(b,2),x=j[0],m=j[1],f=Object(r.useState)(),h=Object(u.a)(f,2),v=h[0],p=h[1];Object(r.useEffect)((function(){v&&clearTimeout(v);var e=setTimeout((function(){m(x===l-1?0:function(e){return e+1})}),2200);return p(e),function(){clearTimeout(e)}}),[x]);var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=x+e;return m(t>=l?0:t<=-1?l-1:t)};return Object(C.jsx)("div",{className:"flex mt-2 ml-6",children:Object(C.jsxs)("div",{className:"flex flex-col items-center bg-gray-50 shadow p-2",children:[Object(C.jsx)(Ge,{id:null===(t=d[x])||void 0===t?void 0:t.id,title:null===(n=d[x])||void 0===n?void 0:n.title,author:null===(a=d[x])||void 0===a||null===(s=a.authors)||void 0===s?void 0:s.join(" "),image:null===(c=d[x])||void 0===c?void 0:c.image,votesAmount:null===(i=d[x])||void 0===i?void 0:i.votesAmount,avgRating:null===(o=d[x])||void 0===o?void 0:o.avgRating}),Object(C.jsxs)("div",{className:"flex flex-row",children:[Object(C.jsx)("button",{className:"btn-page px-2",type:"button",onClick:function(){return g(-1)},children:"\u2b9c"}),Object(C.jsx)("div",{className:"w-80"}),Object(C.jsx)("button",{className:"btn-page px-2",type:"button",onClick:function(){return g(1)},children:"\u2b9e"})]})]})})},Ze=function(e){var t=e.type,n=Object(r.useState)([]),a=Object(u.a)(n,2),s=a[0],c=a[1];return Object(r.useEffect)((function(){(function(){var e=Object(j.a)(b.a.mark((function e(){var n,a,r,s,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("top"!==t){e.next=9;break}return e.next=3,v.from("books").select("*").order("avgRating",{ascending:!1});case 3:n=e.sent,a=n.data,r=n.error,c(r?null:a),e.next=15;break;case 9:return e.next=11,v.from("books").select("*");case 11:s=e.sent,i=s.data,o=s.error,c(o?null:i);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),s?Object(C.jsx)(Ke,{entries:null===s||void 0===s?void 0:s.map((function(e){return{id:e.id,title:e.title,authors:e.authors,image:e.imageLinks[0],votesAmount:e.votesAmount,avgRating:e.avgRating}})),entryCount:10}):Object(C.jsx)("p",{children:"Loading..."})},$e=function(){return Object(C.jsxs)("div",{className:"flex w-full flex-row justify-evenly text-2xl p-4",children:[Object(C.jsxs)("div",{className:"flex-col items-center",children:["Our top books:",Object(C.jsx)(Ze,{type:"top"})]}),Object(C.jsx)("div",{id:"spacer"}),Object(C.jsxs)("div",{className:"flex-col items-center",children:["Some of our books:",Object(C.jsx)(Ze,{type:"random"})]})]})},et=function(){return Object(C.jsx)(T.a.div,{exit:nt,children:Object(C.jsxs)("section",{className:"bg-white homepage-container-section mx-auto flex flex-col items-center gap-2 overflow-hidden",children:[Object(C.jsx)(_e,{}),Object(C.jsx)(Xe,{}),Object(C.jsx)($e,{}),Object(C.jsx)(Ye,{})]})})};var tt=function(){var e=L(),t=Object(R.h)();return Object(C.jsx)(M.a,{exitBeforeEnter:!0,initial:!1,children:Object(C.jsxs)(R.d,{location:t,children:[Object(C.jsx)(R.b,{path:"/internships-2021",exact:!0,children:Object(C.jsx)(R.a,{to:"/"})}),Object(C.jsx)(R.b,{path:"/",exact:!0,children:Object(C.jsx)(et,{})}),Object(C.jsx)(R.b,{children:Object(C.jsxs)("div",{className:"h-full min-h-screen pb-2",children:[Object(C.jsx)("header",{className:"sticky top-0 w-full h-auto z-50",children:Object(C.jsx)(xe,{})}),Object(C.jsxs)(R.d,{children:[Object(C.jsx)(Re,{path:"/user",exact:!0,user:e,children:Object(C.jsx)(He,{})}),Object(C.jsx)(Re,{path:"/user/books",exact:!0,user:e,children:Object(C.jsx)(Pe,{})}),Object(C.jsx)(Fe,{path:"/admin/owned",exact:!0,user:e,children:Object(C.jsx)(ye,{})}),Object(C.jsx)(Fe,{path:"/admin/store",exact:!0,user:e,children:Object(C.jsx)(Ae,{})}),Object(C.jsx)(Fe,{path:"/admin/borrowed",exact:!0,user:e,children:Object(C.jsx)(qe,{})}),Object(C.jsx)(R.b,{path:"/books-list",exact:!0,children:Object(C.jsx)(R.a,{to:"/books-list/*/0"})}),Object(C.jsx)(R.b,{path:"/books-list/:q?/:rating?",children:Object(C.jsx)(re,{})}),Object(C.jsx)(R.b,{path:"/book/:id",exact:!0,children:Object(C.jsx)(ve,{})}),Object(C.jsx)(R.b,{path:"*",children:Object(C.jsx)(Me,{})})]})]})})]},t.pathname)})},nt={opacity:0,transition:{duration:.5}},at=function(){return Object(C.jsx)(F,{children:Object(C.jsx)(be,{children:Object(C.jsx)(l.a,{basename:"/internships-2021",children:Object(C.jsx)(tt,{})})})})},rt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,151)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};i.a.render(Object(C.jsxs)(s.a.StrictMode,{children:[Object(C.jsx)(o.b,{position:"bottom-right",transition:o.a,autoClose:6e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(C.jsx)(at,{})]}),document.getElementById("root")),rt()},47:function(e,t,n){},85:function(e,t,n){}},[[145,1,2]]]);
//# sourceMappingURL=main.a309c9d7.chunk.js.map